<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--Shopping Cart-->
    <template id="website_sale.cart" name="Shopping Cart">
        <t t-call="website.layout">
            <div id="wrap">
                <!--<t t-call="website_cpo_sale.cpo_demo">-->
                    <!--<t t-set="cpo_content_class">cpo_website_demo_cart</t>-->
                <!--</t>-->
                 <div class="row" id="xiangdao">
                     <div class="col-md-1"></div>
                     <div class="col-md-10">
                         <t t-call="website_sale.wizard_checkout">
                             <t t-set="step" t-value="10"/>
                         </t>
                     </div>
                     <div class="col-md-1"></div>
                 </div>
                <div class="container oe_website_sale" style="margin-top: 0;">
                    <t t-call="website_cpo_sale.bom_to_check_bom_ref_form">
                        <t t-set="ret_url" t-value="'/shop/cart'"/>
                    </t>
                    <div class="row">
                        <!--<t t-call="website_sale.wizard_checkout">-->
                            <!--<t t-set="step" t-value="10" />-->
                        <!--</t>-->
                        <h2 class="mb32 ml16">Shopping Cart
                            <!--<div class="fa fa-question-circle-o" id="cpo_open_demo"></div>-->
                        </h2>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-sm-12 oe_cart">
                            <div id="testest">
                                <t t-call="website_sale.cart_lines" />
                            </div>
                            <div id="cpo_calculate_tatol" class="row">
                                <div class="container" style="width: 1170px; padding: 0 15px;">
                                    <div class="col-md-12" id="cpo_fixed">
                                    <div class="clearfix" />
                                    <div class="js_cart_lines row">
                                        <t t-foreach="website_sale_order_ids" t-as="website_sale_order">
                                            <div class="cpo_all_checked">
                                                <t t-if="website_sale_order and website_sale_order.website_order_line">
                                                    <input type="checkbox" id="cpo_all_check"/>
                                                    <label>Check all</label>
                                                </t>
                                                <!--<t t-else="">-->
                                                    <!--<input type="checkbox" id="cpo_all_check"/><label>Check all</label>-->
                                                <!--</t>-->
                                                <!--<a href='#' class='js_cpo_delete_product hidden-xs no-decoration'> <small><i class='fa fa-trash-o'></i> Remove</small></a>-->
                                            </div>
                                        </t>
                                        <t t-call="website_sale.total">
                                            <t t-set='extra_class' t-value='"col-md-5 col-md-offset-7 col-xs-8 col-xs-offset-4"'/>
                                        </t>
                                    </div>
                                    <form class="ele_confirm_sale_order" method="post">
                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                                        <input type="hide" id="ele_cart_order_ids" class="hide" name="order_ids"/>
                                        <a class="btn btn-primary pull-right mb32 ele_confirm_cart_form" id="process_checkout">
                                        <span class="hidden-xs">Process Checkout</span>
                                        <span class="visible-xs-inline">Checkout</span>
                                        <span class="fa fa-long-arrow-right" />
                                        </a>
                                    </form>
                                    <a t-if="not optional_products and website_sale_order and website_sale_order.website_order_line" class="btn btn-primary pull-right mb32 hide" href="/shop/checkout">
                                        <span class="hidden-xs">Process Checkout</span>
                                        <span class="visible-xs-inline">Checkout</span>
                                        <span class="fa fa-long-arrow-right" />
                                    </a>
                                    <div class="oe_structure" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--<div class="col-lg-3 col-lg-offset-1 col-sm-3 col-md-3 text-muted" id="right_column">-->
                            <!--<h4 class='hidden-xs'>Policies</h4>-->
                            <!--<ul class="hidden-xs list-unstyled mb32">-->
                                <!--<li>☑ 30-days money-back guarantee</li>-->
                                <!--<li>☑ Invoice sent by e-Mail</li>-->
                            <!--</ul>-->
                            <!--<h4 class='hidden-xs'>Secure Payment</h4>-->
                            <!--<ul class="hidden-xs list-unstyled mb32">-->
                                <!--<li>☑ 256 bit encryption</li>-->
                                <!--<li>☑ Processed by Ogone</li>-->
                            <!--</ul>-->
                        <!--</div>-->
                        <!-- 广告植入 -->
                        <!--<t t-call="website_cpo_sale.ee"/>-->
                    </div>
                </div>
                <div class="oe_structure" />
            </div>
        </t>
    </template>


    <!--Shopping Cart Lines-->
    <template id="website_sale.cart_lines" name="Shopping Cart Lines">
        <div t-if="not website_sale_order_ids" class="js_cart_lines well well-lg">
          Your cart is empty!
        </div>
        <t t-foreach="website_sale_order_ids" t-as="website_sale_order">
            <!--<t t-if="website_sale_order.website_order_line.state == 'draft' or website_sale_order.state == 'draft'">-->
            <t t-if="website_sale_order.website_order_line.state == 'draft'">
            <div t-if="website_sale_order and website_sale_order.website_order_line" id="cpo_website_ele_cart_order">
                <div class="row ele_cart_check_box_root">
                    <div class="col-md-1 ele_cart_check_box">
                        <t t-if="website_sale_order.website_order_line.cpo_checked == 'true'">
                            <input type="checkbox" t-att-id="website_sale_order.id" t-attf-checked="checked" class="ele_cart_checke_input check_style"/>
                        </t>
                        <t t-else="">
                            <input type="checkbox" t-att-id="website_sale_order.id" class="ele_cart_checke_input check_style"/>
                        </t>
                        <!--<t t-if="website_sale_order.website_order_line.cpo_checked == 'false'">-->
                    </div>
                    <div class="col-md-11">
                        <div class="cpo_cart_line_content">
                            <div class="cart_flex cpo_cart_order_line">
                                <h3 class="cart_flex_left_top">
                                    <span>Add time:
                                        <i t-field="website_sale_order.create_date" t-options='{"widget": "datetime"}'/>
                                        <!--<i><t t-esc="website_sale_order.create_date"/></i>-->
                                    </span>
                                    <span>Order: <i><t t-esc="website_sale_order.name"/></i></span>
                                </h3>
                                <ul class="cpo-cart-ul">
                                    <t t-foreach="website_sale_order.website_order_line" t-as="line">
                                        <li t-if="line.product_id.product_tmpl_id" class="cc-li">
                                            <span class="cc-name">Product : </span>
                                            <span class="cc-value">
                                                <strong t-if="not line.bom_file_name"
                                                        t-att-title="line.product_id.with_context(display_default_code=False).display_name"
                                                        t-esc="line.product_id.with_context(display_default_code=False).display_name" />
                                                <strong t-if="line.bom_file_name" t-att-title="line.bom_file_name" t-esc="line.bom_file_name" />
                                            </span>
                                        </li>
                                        <li class="cc-li">
                                            <span class="cc-name">PO No. : </span>
                                            <span class="cc-value">
                                                <span class="cart-product">
                                                    <t t-esc="website_sale_order.po_number"/>
                                                </span>
                                                <span class="cpo_po_number">
                                                    <form class="po_form">
                                                        <input type="hidden" name="order_id" t-att-value="website_sale_order.id"/>
                                                        <input type="hidden" name="po_number" t-att-value="website_sale_order.po_number" readonly="readonly"/>
                                                        <a class="btn btn-primary check_po_number" >
                                                            <t t-if="website_sale_order.po_number">
                                                                <i class="fa fa-circle-o-notch mr5"></i>Update
                                                            </t>
                                                            <t t-if="not website_sale_order.po_number">
                                                                <i class="fa fa-plus-circle mr5"></i>Add
                                                            </t>
                                                        </a>
                                                    </form>
                                                </span>
                                            </span>
                                        </li>
                                        <li class="cc-li">
                                            <span class="cc-name">Part No. : </span>
                                            <span class="cc-value">
                                                <span class="cart-product">
                                                    <t t-esc="website_sale_order.part_no"/>
                                                </span>
                                                <span class="cpo_po_number">
                                                    <form class="po_form">
                                                        <input type="hidden" name="order_id" t-att-value="website_sale_order.id"/>
                                                        <input type="hidden" name="part_no" t-att-value="website_sale_order.part_no" readonly="readonly"/>
                                                        <a class="btn btn-primary check_part_no" >
                                                            <t t-if="website_sale_order.part_no">
                                                                <i class="fa fa-circle-o-notch mr5"></i>Update
                                                            </t>
                                                            <t t-if="not website_sale_order.part_no">
                                                                <i class="fa fa-plus-circle mr5"></i>Add
                                                            </t>
                                                        </a>
                                                    </form>
                                                </span>
                                            </span>
                                        </li>
                                        <li class="cc-li">
                                            <span class="cc-name">Quantity : </span>
                                            <span class="cc-value">
                                                <input type="text" class="cpo_js_quantity form-control quantity text-left"
                                                       t-att-data-line-id="line.id" t-att-data-product-id="line.product_id.id"
                                                       t-att-value="int(line.product_uom_qty) == line.product_uom_qty and int(line.product_uom_qty) or line.product_uom_qty" readonly="readonly"/>
                                            </span>
                                        </li>
                                        <li class="cc-li">
                                            <span class="cc-name">Subtotal : </span>
                                            <span class="cc-value">
                                                <t t-if="(compute_currency(line.product_id.lst_price) - line.price_reduce ) &gt; 0.01  and website.get_current_pricelist().discount_policy=='without_discount'">
                                                    <del t-attf-class="#{'text-danger mr8'}" style="white-space: nowrap;" t-esc="compute_currency(line.product_id.website_public_price)" t-options="{'widget': 'monetary', 'display_currency': website.get_current_pricelist().currency_id, 'from_currency': website.currency_id}" />
                                                </t>
                                                <span t-field="line.price_subtotal" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'from_currency': website_sale_order.pricelist_id.currency_id, 'display_currency': website.currency_id}" groups="sale.group_show_price_subtotal" />
                                            </span>
                                        </li>
                                        <li class="cc-li cc-li-bt">
                                            <div class="cpo_cart_line_btn">
                                                <t t-if="website_sale_order.product_type == 'PCBA'">
                                                    <t t-if="website_sale_order.web_type == 'no-material'" t-set="cart_url" t-value="'/pcba?type=nomaterial'" />
                                                    <t t-if="website_sale_order.web_type != 'no-material'" t-set="cart_url" t-value="'/pcba?type=%s' % website_sale_order.web_type" />
                                                </t>
                                                <t t-if="website_sale_order.product_type == 'Stencil'">

                                                </t>
                                                <t t-if="website_sale_order.product_type != 'PCBA' and website_sale_order.product_type != 'Stencil'">
                                                    <t t-if="website_sale_order.web_type == 'package-price'">
                                                        <t t-set="cart_url" t-value="'/pcb/package-price'" />
                                                    </t>
                                                    <t t-if="website_sale_order.web_type != 'package-price'">
                                                        <t t-set="cart_url" t-value="'/pcb?type=%s' % website_sale_order.web_type" />
                                                    </t>
                                                </t>
                                                <t t-if="website_sale_order.product_type != 'Stencil'">
                                                    <form class="edit_order_form" role="form">
                                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                                                        <input type="hidden" name="order_type" t-att-value="website_sale_order.product_type"/>

                                                        <input t-if="website_sale_order.quotation_line" type="hidden" name="quotation_line" value="true"/>
                                                        <input t-if="not website_sale_order.quotation_line" type="hidden" name="quotation_line" value="false"/>

                                                        <input type="hidden" name="order_id" t-att-value="website_sale_order.id"/>
                                                        <input type="hidden" name="url" t-att-value="'%s' % cart_url"/>
                                                        <a class="edit-btn no-decoration" data-toggle="tooltip" data-placement="top" title="Edit">
                                                            <i class="fa fa-edit"></i>
                                                        </a>
                                                    </form>
                                                </t>
                                                <a href='#' class='js_cpo_delete_product hidden-xs no-decoration'
                                                    data-toggle="tooltip" data-placement="top" title="Remove">
                                                    <small>
                                                        <i class='fa fa-trash-o fa-lg'></i>
                                                    </small>
                                                </a>
                                            </div>
                                        </li>
                                    </t>
                                </ul>
                                <table class="table table-striped table-condensed js_cart_lines cpo-none" id="cart_products" t-if="website_sale_order and website_sale_order.website_order_line">
                                    <thead>
                                        <tr>
                                            <th class="td-img">Product:</th>
                                            <th class="td-img text-right">PO No.</th>
                                            <th class="text-right td-qty">Quantity</th>
                                            <th class="text-center td-price">subtotal</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="website_sale_order.website_order_line" t-as="line">
                                            <tr>
                                                <!--<td colspan="2" t-if="not line.product_id.product_tmpl_id" class='td-img'></td>-->
                                                <!--<td align="center" t-if="line.product_id.product_tmpl_id" class='td-img'>-->
                                                    <!--<span t-field="line.product_id.image_small" t-options="{'widget': 'image', 'class': 'img-rounded'}" />-->
                                                <!--</td>-->
                                                <td t-if="line.product_id.product_tmpl_id" class='td-product_name'>
                                                    <div class="cart-product">
                                                        <!--<a t-attf-href="/shop/product/#{ slug(line.product_id.product_tmpl_id) }">-->
                                                            <strong t-if="not line.bom_file_name"
                                                                    t-att-title="line.product_id.with_context(display_default_code=False).display_name"
                                                                    t-esc="line.product_id.with_context(display_default_code=False).display_name" />
                                                            <strong t-if="line.bom_file_name" t-att-title="line.bom_file_name" t-esc="line.bom_file_name" />
                                                        <!--</a>-->
                                                    </div>
                                                    <div class="text-muted hidden-xs small">
                                                        <t t-foreach="line.name.splitlines()[1:]" t-as="name_line">
                                                            <span><t t-esc="name_line"/></span><br/>
                                                        </t>
                                                    </div>
                                                    <!-- remove -->
                                                    <div class="cpo_cart_line_btn">
                                                        <t t-if="website_sale_order.product_type == 'PCBA'">
                                                            <t t-if="website_sale_order.web_type == 'no-material'" t-set="cart_url" t-value="'/pcba?type=nomaterial'" />
                                                            <t t-if="website_sale_order.web_type != 'no-material'" t-set="cart_url" t-value="'/pcba?type=%s' % website_sale_order.web_type" />
                                                        </t>
                                                        <t t-if="website_sale_order.product_type == 'Stencil'">

                                                        </t>
                                                        <t t-if="website_sale_order.product_type != 'PCBA' and website_sale_order.product_type != 'Stencil'">
                                                            <t t-if="website_sale_order.web_type == 'package-price'">
                                                                <t t-set="cart_url" t-value="'/pcb/package-price'" />
                                                            </t>
                                                            <t t-if="website_sale_order.web_type != 'package-price'">
                                                                <t t-set="cart_url" t-value="'/pcb?type=%s' % website_sale_order.web_type" />
                                                            </t>
                                                        </t>
                                                        <t t-if="website_sale_order.product_type != 'Stencil'">
                                                            <form class="edit_order_form" role="form">
                                                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                                                                <input type="hidden" name="order_type" t-att-value="website_sale_order.product_type"/>

                                                                <input t-if="website_sale_order.quotation_line" type="hidden" name="quotation_line" value="true"/>
                                                                <input t-if="not website_sale_order.quotation_line" type="hidden" name="quotation_line" value="false"/>

                                                                <input type="hidden" name="order_id" t-att-value="website_sale_order.id"/>
                                                                <input type="hidden" name="url" t-att-value="'%s' % cart_url"/>
                                                                <a class="edit-btn no-decoration" data-toggle="tooltip" data-placement="top" title="Edit">
                                                                    <i class="fa fa-edit fa-lg"></i>
                                                                </a>
                                                            </form>
                                                        </t>
                                                        <a href='#' class='js_cpo_delete_product hidden-xs no-decoration'
                                                            data-toggle="tooltip" data-placement="top" title="Remove">
                                                            <small>
                                                                <i class='fa fa-trash-o fa-lg'></i>
                                                            </small>
                                                        </a>
                                                    </div>
                                                    <!--<a href='#' class='js_cpo_delete_product hidden-xs no-decoration'> <small><i class='fa fa-trash-o'></i> Remove</small></a>-->
                                                </td>
                                                <!-- 添加PO号 -->
                                                <td class="text-right td-qty">
                                                    <div class="cart-product">
                                                        <t t-esc="website_sale_order.po_number"/>
                                                    </div>
                                                    <div class="cpo_po_number">
                                                        <form class="po_form">
                                                            <input type="hidden" name="order_id" t-att-value="website_sale_order.id"/>
                                                            <input type="hidden" name="po_number" t-att-value="website_sale_order.po_number" readonly="readonly"/>
                                                            <a class="btn btn-default check_po_number" >
                                                                <t t-if="website_sale_order.po_number">Update</t>
                                                                <t t-if="not website_sale_order.po_number">Add</t>
                                                            </a>
                                                        </form>
                                                    </div>
                                                </td>
                                                <td class="text-center td-qty">
                                                     <div class="css_quantity  input-group oe_website_spinner pull-right">
                                                         <input type="text" class="cpo_js_quantity form-control quantity text-center" t-att-data-line-id="line.id" t-att-data-product-id="line.product_id.id" t-att-value="int(line.product_uom_qty) == line.product_uom_qty and int(line.product_uom_qty) or line.product_uom_qty" readonly="readonly"/>
                                                     </div>
                                                    <!--<div class="css_quantity  input-group oe_website_spinner pull-right">-->
                                                        <!--<a t-attf-href="#" class="mb8 input-group-addon js_add_cart_json hidden-xs">-->
                                                            <!--<i class="fa fa-minus"></i>-->
                                                        <!--</a>-->
                                                        <!--<input type="text" class="cpo_js_quantity form-control quantity text-center" t-att-data-line-id="line.id" t-att-data-product-id="line.product_id.id" t-att-value="int(line.product_uom_qty) == line.product_uom_qty and int(line.product_uom_qty) or line.product_uom_qty" readonly="readonly"/>-->
                                                        <!--<a t-attf-href="#" class="mb8 input-group-addon float_left js_add_cart_json hidden-xs">-->
                                                            <!--<i class="fa fa-plus"></i>-->
                                                        <!--</a>-->
                                                    <!--</div>-->
                                                </td>
                                                <td class="text-center td-price" name="price">
                                                    <t t-if="(compute_currency(line.product_id.lst_price) - line.price_reduce ) &gt; 0.01  and website.get_current_pricelist().discount_policy=='without_discount'">
                                                        <del t-attf-class="#{'text-danger mr8'}" style="white-space: nowrap;" t-esc="compute_currency(line.product_id.website_public_price)" t-options="{'widget': 'monetary', 'display_currency': website.get_current_pricelist().currency_id, 'from_currency': website.currency_id}" />
                                                    </t>
                                                    <!--<span t-field="line.price_reduce_taxexcl" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'from_currency': website_sale_order.pricelist_id.currency_id, 'display_currency': website.currency_id}" groups="sale.group_show_price_subtotal" />-->
                                                    <!--<span t-field="line.price_reduce_taxinc" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'from_currency': website_sale_order.pricelist_id.currency_id, 'display_currency': website.currency_id}" groups="sale.group_show_price_total" />-->
                                                    <span t-field="line.price_subtotal" style="white-space: nowrap;" t-options="{'widget': 'monetary', 'from_currency': website_sale_order.pricelist_id.currency_id, 'display_currency': website.currency_id}" groups="sale.group_show_price_subtotal" />
                                                </td>
                                            </tr>
                                        </t>
                                        <!--<tr>-->
                                            <!--<td colspan="3">-->
                                                <!--<a href='#' class='js_cpo_delete_product no-decoration'>-->
                                                    <!--<small>-->
                                                        <!--<i class='fa'>PO Number:</i>-->
                                                        <!--<t t-esc="website_sale_order.po_number"/>-->
                                                    <!--</small>-->
                                                <!--</a>-->
                                            <!--</td>-->
                                        <!--</tr>-->
                                    </tbody>
                                </table>
                            </div>
                            <div class="cart_flex">
                                <t t-call="website_cpo_sale.shoping_cat" />
                            </div>
                        </div>
                        <!-- PO number -->
                        <!--<div class="cpo_po_number">-->
                            <!--<form class="po_form">-->
                                <!--<input type="hidden" name="order_id" t-att-value="website_sale_order.id"/>-->
                                <!--<input type="hidden" name="po_number" t-att-value="website_sale_order.po_number" readonly="readonly"/>-->
                                <!--<a class="btn btn-default check_po_number" >Add PO Number</a>-->
                            <!--</form>-->
                            <!--<t t-if="website_sale_order.product_type == 'PCBA'">-->
                                <!--<t t-set="cart_url" t-value="'/pcba?type=%s' % website_sale_order.web_type" />-->
                            <!--</t>-->
                            <!--<t t-if="website_sale_order.product_type == 'Stencil'">-->

                            <!--</t>-->
                            <!--<t t-if="website_sale_order.product_type != 'PCBA' and website_sale_order.product_type != 'Stencil'">-->
                                <!--<t t-if="website_sale_order.web_type == 'package-price'">-->
                                    <!--<t t-set="cart_url" t-value="'/pcb/package-price'" />-->
                                <!--</t>-->
                                <!--<t t-if="website_sale_order.web_type != 'package-price'">-->
                                    <!--<t t-set="cart_url" t-value="'/pcb?type=%s' % website_sale_order.web_type" />-->
                                <!--</t>-->
                            <!--</t>-->
                            <!--<t t-if="website_sale_order.product_type != 'Stencil'">-->
                                <!--<form class="edit_order_form" role="form">-->
                                    <!--<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />-->
                                    <!--<input type="hidden" name="order_type" t-att-value="website_sale_order.product_type"/>-->

                                    <!--<input t-if="website_sale_order.quotation_line" type="hidden" name="quotation_line" value="true"/>-->
                                    <!--<input t-if="not website_sale_order.quotation_line" type="hidden" name="quotation_line" value="false"/>-->

                                    <!--<input type="hidden" name="order_id" t-att-value="website_sale_order.id"/>-->
                                    <!--<input type="hidden" name="url" t-att-value="'%s' % cart_url"/>-->
                                    <!--<a class="btn btn-default">-->
                                        <!--<i class="fa fa-edit"></i>-->
                                        <!--Edit-->
                                    <!--</a>-->
                                <!--</form>-->
                            <!--</t>-->
                        <!--</div>-->
                        <!-- 订单详情 -->
                        <div class="cpo_cart_line_detail">
                            <a class="cart_show_hide_detail">Show details</a>
                            <div class="details_contents">
                                <t t-if="website_sale_order.product_type == 'PCBA'">
                                    <t t-call="website_cpo_sale.cpo_sale_cart_pcba_detail"/>
                                </t>
                                <t t-if="website_sale_order.product_type != 'PCBA' and website_sale_order.product_type != 'Stencil'">
                                    <t t-call="website_cpo_sale.cpo_sale_cart_pcb_detail"/>
                                </t>
                            </div>
                        </div>
                        <h4 class="cpo_cart_line_tips">
                            <i class="cpo_hint_i_upload">*</i>Please upload the documents required by
                            PCB<i style="color:#4a93fd;">(Gerber File)</i> or PCBA<i style="color:#4a93fd;">(BOM File,SMT File,Gerber File)</i>!
                        </h4>
                    </div>
                </div>
            </div>
            </t>
        </t>
        <t t-call="website_cpo_sale.cpo_po_number_modal"/>
        <t t-call="website_cpo_sale.cpo_order_type_PCBA_modal"/>
    </template>
    <!-- PO number -->
    <template id="cpo_po_number_modal">
        <div class="modal fade" id="edit_cpo_po_number" tabindex="-1" role="dialog" aria-labelledby="po_number_modal" data-backdrop="static" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form class="po_number_form">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                <i class="fa fa-close"></i>
                            </button>
                            <h4 class="modal-title" id="po_number_modal">
                                Add PO number
                            </h4>
                        </div>
                        <div class="modal-body">
                            <div class="number_box">
                                <label for="pnumber">PO Number: </label>
                                <input type="text" id="pnumber" class="form-control" name="po_number" value=""/>
                                <input type="hidden" id="order_id" class="form-control" name="order_id" value=""/>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close
                            </button>
                            <button type="button" class="btn btn-primary confirm_btn">
                                Confirm
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="modal fade" id="edit_cpo_part_number" tabindex="-1" role="dialog" aria-labelledby="part_number_modal" data-backdrop="static" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form class="part_number_form">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                <i class="fa fa-close"></i>
                            </button>
                            <h4 class="modal-title" id="part_number_modal">
                                Add Part No.
                            </h4>
                        </div>
                        <div class="modal-body">
                            <div class="number_box">
                                <label for="pnumber">Part No. : </label>
                                <input type="text" id="part_no" class="form-control" name="part_no" value=""/>
                                <input type="hidden" class="form-control order_id" name="order_id" value=""/>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close
                            </button>
                            <button type="button" class="btn btn-primary confirm_btn">
                                Confirm
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </template>
    <!-- PCBA更改PCB还是PCBA数据 -->
    <template id="cpo_order_type_PCBA_modal">
        <div class="modal fade" id="cpo_select_pcb_or_pcba" tabindex="-1" role="dialog" aria-labelledby="po_number_modal" data-backdrop="static" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                            <i class="fa fa-close"></i>
                        </button>
                        <h4 class="modal-title" id="po_number_modal">
                            Select order type
                        </h4>
                    </div>
                    <div class="modal-body">
                        <div class="select_order_box">
                            <p>Select the type of order you want to modify</p>
                            <button type="button" class="btn btn-primary">PCBA</button>
                            <button type="button" class="btn btn-primary">PCB</button>
                        </div>
                        <form class="cpo_select_pcb_or_pcba_edit" action="/edit/order">
                             <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                            <div class="input_content"></div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close-->
                        <!--</button>-->
                        <!--<button type="button" class="btn btn-primary confirm_btn">-->
                            <!--Confirm-->
                        <!--</button>-->
                    </div>
                </div>
            </div>
        </div>
    </template>

    <!-- PCBA 详情 -->
    <template id="cpo_sale_cart_pcba_detail">
        <table class="table table-bordered" width="100%" cellspacing="0" cellpadding="0">
            <tbody>
                <tr>
                    <td height="28"><b>Ordered Qty :</b> </td>
                    <td><t t-esc="int(website_sale_order.website_order_line.product_uom_qty)"/></td>
                    <td><b>Width :</b> </td>
                    <td>
                        <!--<t t-if="website_sale_order.product_type != 'PCBA' and website_sale_order.product_type != 'Stencil'" t-esc="website_sale_order.quotation_line.cpo_width"/>-->
                        <t t-esc="website_sale_order.website_order_line.pcb_width"/>
                    </td>
                    <td><b>Length :</b></td>
                    <td>
                        <!--<t t-if="website_sale_order.product_type != 'PCBA' and website_sale_order.product_type != 'Stencil'" t-esc="website_sale_order.quotation_line.cpo_length"/>-->
                        <t t-esc="website_sale_order.website_order_line.pcb_width"/>
                    </td>
                </tr>
                <tr>
                    <td><b>SMT parts quantity :</b></td>
                    <td>
                        <t t-esc="website_sale_order.website_order_line.smt_component_qty"/>
                    </td>
                    <td height="28"><b>DIP through hole quantity :</b> </td>
                    <td>
                        <t t-esc="website_sale_order.website_order_line.smt_plug_qty"/>
                    </td>
                    <td height="28"><b>Board thickness :</b> </td>
                    <td>
                        <t t-esc="website_sale_order.website_order_line.pcb_thickness"/>
                    </td>
                </tr>
                <tr>
                    <td><b>SMT parts quantity :</b></td>
                    <td>
                        <t t-if="website_sale_order.website_order_line.layer_pcb == 1">
                            Single side SMT
                        </t>
                        <t t-if="website_sale_order.website_order_line.layer_pcb == 2">
                            Double side SMT
                        </t>
                    </td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </tbody>
        </table>
    </template>

    <!-- PCBA 详情 -->
    <template id="cpo_sale_cart_pcb_detail">
        <table class="table table-bordered" width="100%" cellspacing="0" cellpadding="0">
            <tbody>
                <tr>
                    <td height="28"><b>Ordered Qty :</b> </td>
                    <td><t t-esc="int(website_sale_order.website_order_line.product_uom_qty)"/></td>
                    <td><b>Width :</b> </td>
                    <td>
                        <t t-esc="website_sale_order.quotation_line.cpo_width"/>
                    </td>
                    <td><b>Length :</b></td>
                    <td>
                        <t t-esc="website_sale_order.quotation_line.cpo_length"/>
                    </td>
                </tr>
                <tr>
                    <td><b>Material :</b></td>
                    <td>
                        <t t-esc="website_sale_order.quotation_line.base_type.name"/>
                    </td>
                    <td height="28"><b>Technology :</b> </td>
                    <td>
                        <t t-esc="website_sale_order.quotation_line.layer_number.name"/>
                    </td>
                    <td height="28"><b>Board thickness :</b> </td>
                    <td>
                        <t t-esc="website_sale_order.quotation_line.thickness"/>
                    </td>
                </tr>
                <tr>
                    <td><b>Outer Finished Copper :</b></td>
                    <td>
                        <t t-esc="website_sale_order.quotation_line.outer_copper"/>
                    </td>
                    <td height="28"><b>Inner Finished Copper :</b> </td>
                    <td>
                        <t t-esc="website_sale_order.quotation_line.inner_copper"/>
                    </td>
                    <td height="28"><b>Solder Mask Color :</b> </td>
                    <td>
                        <t t-esc="website_sale_order.quotation_line.silkscreen_color.name"/>
                    </td>
                </tr>
                <tr>
                    <td><b>Silkscreen Color :</b></td>
                    <td>
                        <t t-esc="website_sale_order.quotation_line.text_color.name"/>
                    </td>
                    <td height="28"><b>Surface Treatment :</b> </td>
                    <td>
                        <t t-esc="website_sale_order.quotation_line.surface.name"/>
                    </td>
                    <td height="28"><b>E-TEST :</b> </td>
                    <td>
                        <t t-if="website_sale_order.quotation_line.fly_probe == True">
                            Free Flying Probe
                        </t>
                        <t t-if="website_sale_order.quotation_line.fly_probe == False">
                            E-test fixture
                        </t>
                    </td>
                </tr>
            </tbody>
        </table>
    </template>


    <template id="website_sale.total">
        <!--<div id="cart_total" t-att-class="extra_class or ''" t-if="website_sale_order and website_sale_order.website_order_line">-->
        <div id="cart_total" t-att-class="extra_class or ''">
            <!--<div class="row" id="order_total_untaxed">-->
                <!--<span class="col-xs-6 text-right text-muted">Subtotal:</span>-->
                <!--<span class="col-xs-6 text-right-not-xs text-left-xs text-muted">-->
                    <!--<span style="white-space: nowrap;" t-options="{'widget': 'monetary','from_currency': website_sale_order.pricelist_id.currency_id,'display_currency': website.currency_id}" />-->
                    <!--<t t-esc="order_ids_untaxed"/>-->
                <!--</span>-->
            <!--</div>-->
            <!--<div class="row" id="order_total_taxes">-->
                <!--<span class="col-xs-6 text-right text-muted" title="Taxes may be updated after providing shipping address"> Taxes:</span>-->
                <!--<span class="col-xs-6 text-right-not-xs text-left-xs text-muted">-->
                    <!--<span style="white-space: nowrap;" t-options="{'widget': 'monetary', 'from_currency': website_sale_order.pricelist_id.currency_id, 'display_currency': website.currency_id}" />-->
                    <!--<t t-esc="order_ids_tax"/>-->
                <!--</span>-->
            <!--</div>-->
            <div class="row" id="order_total">
                <t t-call="website_cpo_sale.cpo_sale_total_template"/>
                <!--<span class="col-xs-6 text-right h4">Total:</span>-->
                <!--<span class="col-xs-6 text-right-not-xs text-left-xs h4" style="white-space: nowrap;">-->
                    <!--&lt;!&ndash;<span  style="white-space: nowrap;" t-options="{'widget': 'monetary','from_currency': website_sale_order.pricelist_id.currency_id,'display_currency': website.currency_id}" />&ndash;&gt;-->
                    <!--&lt;!&ndash;<t t-esc="website.currency_id.symbol"/>&ndash;&gt;-->
                    <!--&lt;!&ndash;<t t-esc="order_ids_total"/>&ndash;&gt;-->
                    <!--<t t-esc="sum([x.amount_total for x in website_sale_order_ids if x.order_line.cpo_checked == 'true'])"/>-->
                <!--</span>-->
            </div>
        </div>
        <!--<div id="cart_total" t-att-class="extra_class or ''" t-if="website_sale_order and website_sale_order.website_order_line">-->
            <!--<div class="row" id="order_total_untaxed">-->
                <!--<span class="col-xs-6 text-right text-muted">Subtotal:</span>-->
                <!--<span class="col-xs-6 text-right-not-xs text-left-xs text-muted">-->
                    <!--<span style="white-space: nowrap;" t-options="{'widget': 'monetary','from_currency': website_sale_order.pricelist_id.currency_id,'display_currency': website.currency_id}" />-->
                    <!--<t t-esc="order_ids_untaxed"/>-->
                <!--</span>-->
            <!--</div>-->
            <!--<div class="row" id="order_total_taxes">-->
                <!--<span class="col-xs-6 text-right text-muted" title="Taxes may be updated after providing shipping address"> Taxes:</span>-->
                <!--<span class="col-xs-6 text-right-not-xs text-left-xs text-muted">-->
                    <!--<span style="white-space: nowrap;" t-options="{'widget': 'monetary', 'from_currency': website_sale_order.pricelist_id.currency_id, 'display_currency': website.currency_id}" />-->
                    <!--<t t-esc="order_ids_tax"/>-->
                <!--</span>-->
            <!--</div>-->
            <!--<div class="row" id="order_total">-->
                <!--<span class="col-xs-6 text-right h4">Total:</span>-->
                <!--<span class="col-xs-6 text-right-not-xs text-left-xs h4" style="white-space: nowrap;">-->
                    <!--<span  style="white-space: nowrap;" t-options="{'widget': 'monetary','from_currency': website_sale_order.pricelist_id.currency_id,'display_currency': website.currency_id}" />-->
                    <!--<t t-esc="order_ids_total"/>-->
                <!--</span>-->
            <!--</div>-->
        <!--</div>-->
    </template>
    <!-- 购物车价格返回 -->
    <template id="cpo_sale_total_template">
        <span class="col-xs-6 text-right h4">Total:</span>
        <span class="col-xs-6 text-right-not-xs text-left-xs h4" style="white-space: nowrap;">
            <!--<span  style="white-space: nowrap;" t-options="{'widget': 'monetary','from_currency': website_sale_order.pricelist_id.currency_id,'display_currency': website.currency_id}" />-->
            <!--<t t-esc="website.currency_id.symbol"/>-->
            <!--<t t-esc="order_ids_total"/>-->
            <small class="mr5">$</small>
            <t t-if="website_sale_order_ids">
                <t t-esc="sum([x.amount_total for x in website_sale_order_ids if x.order_line.cpo_checked == 'true'])"/>
            </t>
            <t t-if="not website_sale_order_ids">
                0.0
            </t>
        </span>
    </template>

    <template id="website_sale.wizard_checkout" name="Wizard Checkout">
        <t t-set="website_sale_order" t-value="website.sale_get_order()"/>
        <ul class="wizard pull-right hidden-xs">
            <li t-att-class="step==5 and 'text-primary' or 'text-muted'" id="step5" style="max-width: 8%;">
                <t t-if="step&gt;50 and step&lt;100">
                    Quote<span class="chevron"></span>
                </t>
                <t t-if="not (step&gt;50 and step&lt;100)">
                    Quote<span class="chevron"></span>
                </t>
            </li>
            <li t-att-class="step==8 and 'text-primary' or 'text-muted'" id="step8">
                <t t-if="step&gt;50 and step&lt;100">
                    Add to cart<span class="chevron"></span>
                </t>
                <t t-if="not (step&gt;50 and step&lt;100)">
                    Add to cart<span class="chevron"></span>
                </t>
            </li>

            <li t-att-class="step==10 and 'text-primary' or 'text-muted'" id="step10">
                <t t-if="step&gt;10 and step&lt;50">
                    <a href="/shop/cart" class="text-success">
                        Review Order<span class="chevron"></span>
                    </a>
                </t>
                <t t-if="not (step&gt;10 and step&lt;50)">
                    Review Order<span class="chevron"></span>
                </t>
                <span class="chevron"/>
            </li>
            <li t-att-class="(step==20 and 'text-primary') or 'text-muted'" id="step20">
                <t t-if="step&gt;20 and step&lt;50">
                    <a href="/shop/checkout" class="text-success">
                        <!-- billing if not loggedin - TODO -->
                        <t>Billing</t>
                        <t t-if="not website_sale_order or not website_sale_order.website_order_line or not website_sale_order.only_services" groups="sale.group_delivery_invoice_address"> &amp; Shipping</t>
                        <span class="chevron"/>
                    </a>
                </t>
                <t t-if="not (step&gt;20 and step&lt;50)">
                    <t>Billing</t>
                    <t t-if="not website_sale_order or not website_sale_order.website_order_line or not website_sale_order.only_services" groups="sale.group_delivery_invoice_address"> &amp; Shipping</t>
                    <span class="chevron"/>
                </t>
            </li>
            <li t-att-class="(step==40 and 'text-primary') or 'text-muted'" id="step40">
                <t t-if="step&gt;39 and step&lt;50">
                    <a href="/shop/payment">Under Review<span class="chevron"></span></a>
                </t>
                <t t-if="not (step&gt;39 and step&lt;50)">
                    <t>Under Review</t>
                </t>
                <span class="chevron"/>
            </li>
            <li t-att-class="(step==45 and 'text-primary') or 'text-muted'" id="step45" style="max-width: 8%;">
                <t t-if="step&gt;40 and step&lt;46">
                    <a href="/my/invoices">Pay<span class="chevron"></span></a>
                </t>
                <t t-if="not (step&gt;40 and step&lt;46)">
                    <t>Pay</t>
                </t>
                <span class="chevron"/>
            </li>
            <li t-att-class="(step==50 and 'text-primary') or 'text-muted'" id="step50">
                Manufacturing<span class="chevron"></span>
            </li>
            <li t-att-class="(step==55 and 'text-primary') or 'text-muted'" id="step55">
                Delivery<span class="chevron"></span>
            </li>
            <li t-att-class="(step==60 and 'text-primary') or 'text-muted'" id="step60">
                Completed<span class="chevron"></span>
            </li>
        </ul>
    </template>

    <!--<template id="portal_my_home_menu_sale" name="Portal layout : sales menu entries" inherit_id="website_portal.portal_layout" priority="20">-->
        <!--<xpath expr="//ul[contains(@class,'o_portal_submenu')]" position="inside">-->
    <!--My Account 将My Account改成My Orders，URL不变 -->
    <!--<template id="portal_my_home_menu_my_account" name="Portal layout : My Account menu entries" inherit_id="website_portal.portal_layout" priority="20">-->
        <!--<xpath expr="//div[@class='navbar-header']//a[@class='navbar-brand']" position="replace">-->
            <!--<a class="navbar-brand my_home_nav_brand" href="/my/home"><i class="fa fa-home"/>-->
                <!--My Quotation-->
            <!--</a>-->
        <!--</xpath>-->
    <!--</template>-->
    <!--&lt;!&ndash;My Account // Wait Confirm&ndash;&gt;-->
    <!--<template id="portal_my_home_menu_my_waitconfirm" name="Portal layout : my waitconfirm menu entries" inherit_id="website_portal.portal_layout" priority="20">-->
        <!--<xpath expr="//ul[contains(@class,'o_portal_submenu')]" position="inside">-->
            <!--<li t-att-class="page_name == 'waitconf' and 'active'">-->
                <!--<a href="/my/waitconf">Wait Confirm</a>-->
            <!--</li>-->
        <!--</xpath>-->
    <!--</template>-->
    <!--<template id="portal_my_home_menu_sales" name="Portal layout : sales menu entries" inherit_id="website_portal.portal_layout" priority="20">-->
        <!--<xpath expr="//ul[contains(@class,'o_portal_submenu')]/li[2]" position="replace">-->
            <!--<attribute name="invisible">1</attribute>-->
        <!--</xpath>-->
        <!--<xpath expr="//ul[contains(@class,'o_portal_submenu')]/li[0]" position="replace">-->
            <!--<attribute name="invisible">1</attribute>-->
        <!--</xpath>-->
    <!--</template>-->
    <!--<template id="portal_my_home_menu_my_waitconfirm" name="Portal layout : my waitconfirm menu entries" inherit_id="website_portal.portal_layout" priority="20">-->
        <!--<xpath expr="//ul[contains(@class,'o_portal_submenu')]" position="inside">-->
            <!--<li t-att-class="page_name == 'quote' and 'active'">-->
                <!--<a href="/my/quotes">Quotations</a>-->
            <!--</li>-->
        <!--</xpath>-->
    <!--</template>-->
    <!--<template id="portal_my_home_menu_home" name="Portal layout : my express menu entries" inherit_id="website_portal.portal_layout" priority="30">-->
        <!--<xpath expr="//ul[contains(@class,'o_portal_submenu')]//li[1]" position="after">-->
            <!--<li  t-att-class="page_name == 'my home' and 'active'">-->
                <!--<a href="/my/home">My Quotation</a>-->
            <!--</li>-->
        <!--</xpath>-->
    <!--</template>-->
    <!--<template id="portal_my_home_menu_myexpress" name="Portal layout : my express menu entries" inherit_id="website_portal.portal_layout" priority="70">-->
        <!--<xpath expr="//ul[contains(@class,'o_portal_submenu')]" position="inside">-->
            <!--&lt;!&ndash;<li  t-att-class="page_name == 'my home' and 'active'">&ndash;&gt;-->
                <!--&lt;!&ndash;<a href="/my/home">My Quotation</a>&ndash;&gt;-->
            <!--&lt;!&ndash;</li>&ndash;&gt;-->
            <!--<li t-att-class="page_name == 'my express customer' and 'active'">-->
                <!--<a href="/my/express">Express</a>-->
            <!--</li>-->
            <!--&lt;!&ndash;<li t-att-class="page_name == 'my express cpo' and 'active'">&ndash;&gt;-->
                <!--&lt;!&ndash;<a href="/my/express/cpo">CPO Express No.</a>&ndash;&gt;-->
            <!--&lt;!&ndash;</li>&ndash;&gt;-->
            <!--<li t-att-class="page_name == 'my bom' and 'active'">-->
                <!--<a href="/my/bom">BOM</a>-->
            <!--</li>-->
            <!--<li t-att-class="page_name == 'my coupon' and 'active'">-->
                <!--<a href="/my/coupon">Coupon</a>-->
            <!--</li>-->
            <!--<li t-att-class="page_name == 'my manufacturing' and 'active'">-->
                <!--<a href="/my/manufacturing">Manufacturing</a>-->
            <!--</li>-->
            <!--&lt;!&ndash;<li t-att-class="page_name == 'my material' and 'active'">&ndash;&gt;-->
                <!--&lt;!&ndash;<a href="/my/material">Material Warehouse</a>&ndash;&gt;-->
            <!--&lt;!&ndash;</li>&ndash;&gt;-->
        <!--</xpath>-->
    <!--</template>-->

    <!--原My account 现在My Quotation-->
    <!--<template id="portal_my_home_sale_wairt_confirm" name="Wairt Confirm" inherit_id="website_portal.portal_my_home" priority="20">-->
        <!--<xpath expr="//div[contains(@class,'o_my_home_content')]" position="inside">-->
            <!--<h3 t-if="wait_count" class="page-header">-->
                <!--<a href="/my/quotes">Your Quotations-->
                    <!--<small class="ml8">-->
                        <!--<span class='badge'><t t-esc="wait_count"/></span>-->
                    <!--</small>-->
                <!--</a>-->
            <!--</h3>-->
        <!--</xpath>-->
    <!--</template>-->
    <!-- My account nav -->
    <!--<template id="portal_my_home_menu_li_1" name="Portal Menu" inherit_id="website_portal_sale.portal_my_home_menu_sale">-->
        <!--<xpath expr="//ul[contains(@class,'o_portal_submenu')]/li[1]" position="replace"></xpath>-->
    <!--</template>-->
    <!--<template id="portal_my_home_menu_li_2" name="Portal Menu" inherit_id="website_portal_sale.portal_my_home_menu_sale">-->
        <!--<xpath expr="//ul[contains(@class,'o_portal_submenu')]/li[2]" position="replace"></xpath>-->
    <!--</template>-->

    <!-- My account content -->
    <template id="portal_my_home_ordes" name="Portal My Home : sales entries" inherit_id="website_portal_sale.portal_my_home_sale">
        <xpath expr="//div[contains(@class,'o_my_home_content')]/h3[2]" position="replace">
            <!--覆盖原有的sale orders-->
            <div class="" id="cpo_my_home_account">
                <div class="panel-group" role="tablist" id="myCollapse1529734499041">
                    <div class="panel panel-default">
                        <div class="panel-heading" role="tab" data-toggle="collapse" data-parent="#myCollapse1529734499041" data-target="#myCollapseTab1529734499041" aria-expanded="true">
                            <h4 class="panel-title o_default_snippet_text"> Pending order
                                <i class="fa fa-minus"></i>
                                <small class="ml8"><span class='badge'><t t-esc="wait_count"/></span></small>
                            </h4>
                        </div>
                        <div class="panel-collapse collapse in" role="tabpanel" id="myCollapseTab1529734499041" aria-expanded="true" style="">
                            <div class="panel-body">
                                <t t-if="not quotation_qty.get('wait_qty')">
                                    <h4 class="text-center">There are no sales orders yet !</h4>
                                </t>
                                <t t-else="">
                                    <table class="table table-hover o_my_status_table get_express_table" id="cart_products">
                                        <thead>
                                            <tr>
                                                <th class='td-img'>Order</th>
                                                <th class='td-img'>Product</th>
                                                <th class='td-qty text-center'>Quantity</th>
                                                <th class='text-center'>State</th>
                                                <th class='text-center td-price'>Subtotal</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!--<t t-if="not quotation_qty.get('wait_qty')">-->
                                                <!--<p>No order</p>-->
                                            <!--</t>-->
                                            <!--<t t-foreach="quotation_qty.get('wait_qty')" t-as="order_ids_list">-->
                                            <h3 class="text-center" t-if="not quotation_qty.get('wait_qty')">No order is currently submitted !</h3>
                                            <t t-foreach="quotation_qty.get('wait_qty')" t-as="line">
                                                <tr>
                                                    <td t-if="line.product_id.product_tmpl_id">
                                                        <!--<a t-attf-href="/my/waitconf/{{line.order_id.id}}?{{keep_query()}}"><t t-esc="line.order_id.name"/></a>-->
                                                        <strong t-field="line.name" />
                                                    </td>
                                                    <td class='td-product_name text-center' t-if="line.product_id.product_tmpl_id">
                                                        <div>
                                                            <!--<strong t-field="line.product_id.with_context(display_default_code=False).display_name" />-->
                                                            <strong t-if="not line.order_line.product_id" t-esc="line.product_id.with_context(display_default_code=False).display_name" />
                                                            <strong t-if="line.order_line.product_id" t-esc="line.order_line.product_id.name" />
                                                        </div>
                                                        <div class="text-muted hidden-xs small">
                                                            <t t-foreach="line.name.splitlines()[1:]" t-as="name_line">
                                                                <!--<span><t t-esc="name_line"/></span><br/>-->
                                                                <strong t-if="not line.order_line.product_id" t-esc="line.order_line.product_id.with_context(display_default_code=False).display_name" />
                                                                <strong t-if="line.order_line.product_id" t-esc="line.order_line.product_id" />
                                                            </t>
                                                        </div>
                                                    </td>
                                                    <!--<td><span t-esc="order_ids_list.website_order_line"/></td>-->
                                                    <td class='td-qty text-center'>
                                                      <div t-esc="int(line.order_line.product_uom_qty) == line.order_line.product_uom_qty and int(line.order_line.product_uom_qty) or line.order_line.product_uom_qty" />
                                                    </td>
                                                    <td class='text-center'>
                                                        <t t-if="line.cpo_lock_bool">
                                                            <div>Revised</div>
                                                        </t>
                                                        <t t-else="">
                                                            <div>Under review</div>
                                                        </t>
                                                    </td>
                                                    <td class="text-center td-price">
                                                        <!--<span t-field="line.price_subtotal" style="white-space: nowrap;" t-options="{'widget': 'monetary','from_currency': line.order_id.pricelist_id.currency_id,'display_currency': website.currency_id}" />-->
                                                        <span>Pending review</span>
                                                    </td>
                                                </tr>
                                            </t>
                                            <!--</t>-->
                                        </tbody>
                                    </table>
                                </t>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading collapsed" role="tab" data-toggle="collapse" data-parent="#myCollapse1529734499041" data-target="#myCollapseTab1529734499044" aria-expanded="false">
                            <h4 class="panel-title o_default_snippet_text"> Your Sales Orders
                                <i class="fa fa-plus"></i>
                                <small class="ml8"><span class='badge'><t t-esc="order_count"/></span></small>
                            </h4>
                        </div>
                        <div class="panel-collapse collapse" role="tabpanel" id="myCollapseTab1529734499044" aria-expanded="false" style="height: 0px;">
                            <div class="panel-body">
                                <t t-if="not quotation_qty.get('order_qty')">
                                    <h4 class="text-center">There are no sales orders yet !</h4>
                                </t>
                                <t t-else="">
                                    <table class="table table-hover o_my_status_table get_express_table">
                                        <thead>
                                            <tr>
                                                <th>
                                                    <span class='hidden-xs'>Sales Order #</span>
                                                    <span class='visible-xs'>Ref.</span>
                                                </th>
                                                <th>Order Date</th>
                                                <th ></th>
                                                <th>Total</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="quotation_qty.get('order_qty')" t-as="order">
                                                <tr>
                                                    <td>
                                                        <a t-attf-href="/my/orders/{{order.id}}?{{keep_query()}}"><t t-esc="order.name"/></a>
                                                    </td>
                                                    <td style="text-align: center;">
                                                      <span t-field="order.date_order" t-options="{'widget': 'date'}"/>&amp;nbsp;
                                                      <span class='hidden-xs' t-field="order.date_order" t-options="{'time_only': True}"/>
                                                    </td>
                                                    <td style="text-align: center;">
                                                        <t t-if="order.state == 'progress'">
                                                            <span class="label label-info"><i class="fa fa-fw fa-clock-o"></i><span class="hidden-xs"> Invoiced</span></span>
                                                        </t>
                                                        <t t-if="order.state in ['shipping_except','invoice_except']">
                                                            <span class="label label-danger"><i class="fa fa-fw fa-warning"></i><span class="hidden-xs"> Problem</span></span>
                                                        </t>
                                                        <t t-if="order.state == 'done'">
                                                            <span class="label label-default hidden-xs"><i class="fa fa-fw fa-check"></i><span class="hidden-xs"> Done</span></span>
                                                        </t>
                                                    </td>
                                                    <td style="text-align: center;"><span t-field="order.amount_total" t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/></td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                    <div t-if="pager" class="o_portal_pager text-center" id="get_page">
                                        <t t-call="website.pager"/>
                                    </div>
                                </t>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading collapsed" role="tab" data-toggle="collapse" data-parent="#myCollapse1529734499041" data-target="#myCollapseTab1529734499042" aria-expanded="false">
                            <h4 class="panel-title o_default_snippet_text"> Your Invoices and Payments
                                <i class="fa fa-plus"></i>
                                <small class="ml8"><span class='badge'><t t-esc="invoice_count"/></span></small>
                            </h4>
                        </div>
                        <div class="panel-collapse collapse" role="tabpanel" id="myCollapseTab1529734499042" aria-expanded="false" style="height: 0px;">
                            <div class="panel-body">
                                <t t-if="not quotation_qty.get('invoice_qty')">
                                    <h4 class="text-center">There are no sales orders yet !</h4>
                                </t>
                                <t t-else="">
                                    <table class="table table-hover o_my_status_table get_express_table">
                                        <thead>
                                            <!--<tr class="active">-->
                                            <tr>
                                                <th>Invoice #</th>
                                                <th>Invoice Date</th>
                                                <th class='hidden-xs'>Due Date</th>
                                                <th></th>
                                                <th></th>
                                                <th>Amount Due</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr t-if="not quotation_qty.get('invoice_qty')">
                                                <h4 class="text-center">There are currently no orders to pay !</h4>
                                            </tr>
                                            <t t-foreach="quotation_qty.get('invoice_qty')" t-as="invoice">
                                                <tr>
                                                    <td class= "cell_overflow">
                                                        <a t-att-href="'/my/invoices/pdf/'+str(invoice.id)" t-att-title="invoice.number"><t t-esc="invoice.number"/></a>
                                                    </td>
                                                    <td><span t-field="invoice.date_invoice"/></td>
                                                    <td class='hidden-xs'><span t-field="invoice.date_due"/></td>
                                                    <td>
                                                        <t t-if="invoice.state == 'open'">
                                                            <span class="label label-info"><i class="fa fa-fw fa-clock-o"></i><span class="hidden-xs"> Waiting for Payment</span></span>
                                                        </t>
                                                        <t t-if="invoice.state == 'paid'">
                                                            <span class="label label-default"><i class="fa fa-fw fa-check"></i><span class="hidden-xs"> Paid</span></span>
                                                        </t>
                                                        <t t-if="invoice.state == 'cancel'">
                                                            <span class="label label-default"><i class="fa fa-fw fa-remove"></i><span class="hidden-xs"> Cancelled</span></span>
                                                        </t>
                                                    </td>
                                                    <td>
                                                      <a t-if="invoice.state == 'open'" t-attf-href="/website_payment/pay?reference=#{invoice.number}&amp;amount=#{invoice.residual}&amp;currency_id=#{invoice.currency_id.id}&amp;country_id=#{invoice.partner_id.country_id.id}" alt="Pay Now" class="btn btn-xs btn-primary"><i class="fa fa-arrow-circle-right"/><span class='hidden-xs'> Pay Now</span></a>
                                                    </td>
                                                    <td><span t-field="invoice.residual" t-options='{"widget": "monetary", "display_currency": invoice.currency_id}'/></td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
    </template>

    <template id="portal_my_home_invoice_replace" name="Portal My Home : invoice entries" inherit_id="website_portal_sale.portal_my_home_invoice">
        <xpath expr="//div[contains(@class,'o_my_home_content')]/h3[2]" position="replace">
            <!--覆盖原有的Invoice-->
        </xpath>
    </template>

    <!--客户自供快递信息填写-->
    <template id="portal_my_express" name="My Express">
        <t t-call="website_portal.portal_layout">
            <!--<div class="page-header">-->
                <!--&lt;!&ndash;<span class="h3">Please click the Add button to submit logistics information.</span>&ndash;&gt;-->
                <!--<t t-call="website_portal.portal_searchbar"/>-->
            <!--</div>-->
            <t t-if="not express_no">
                <p>There are currently no quotations for your account.</p>
            </t>
            <t t-if="express_no">
                <t t-call="website_cpo_sale.cpo_express_self_service"/>
            </t>
      </t>
    </template>
    <!-- 客户自供快递填写 -->
    <template id="cpo_express_self_service">

        <div id="cpo_express_no">
            <div class="container" id="ele_shubiao">
                <!--<h2 class="page-header o_default_snippet_text">FAQ<small class="o_default_snippet_text"></small></h2>-->
                <div class="panel-group" role="tablist" id="myCollapse1529734499041">
                    <div class="panel panel-default">
                        <div class="panel-heading" role="tab" data-toggle="collapse" data-parent="#myCollapse1529734499041" data-target="#myCollapseTab1529734499041" aria-expanded="true">
                            <h4 class="panel-title o_default_snippet_text"> Customer-supplied Express No.
                                <i class="fa fa-minus"></i>
                                <small class="ml8"><span class='badge'><t t-esc="express_no.get('express_self_count')"/></span></small>
                            </h4>
                        </div>
                        <div class="panel-collapse collapse in" role="tabpanel" id="myCollapseTab1529734499041" aria-expanded="true" style="">
                            <div class="panel-body">
                                <t t-if="not express_no.get('express_self_no')">
                                    <h4 class="text-center">There are no sales orders yet !</h4>
                                </t>
                                <t t-else="">
                                    <table class="table o_my_status_table get_express_table">
                                        <thead>
                                            <tr>
                                                <th class="col-xs-4 col-md-3">Quotation #</th>
                                                <th class="col-xs-4 col-md-5">Express</th>
                                                <!--<td>express Provider</td>-->
                                                <!--<td>express Number</td>-->
                                                <th class="col-xs-4 col-md-4">Order Date</th>
                                                <!--<th>Valid Until</th>-->
                                                <!--<th></th>-->
                                                <!--<th>Total</th>-->
                                            </tr>
                                        </thead>
                                        <t t-foreach="express_no.get('express_self_no')" t-as="quotation">
                                            <tr>
                                                <td class="col-xs-4 col-md-3">
                                                    <a t-attf-href="/my/orders/#{quotation.id}?#{keep_query()}" class="order_num"><t t-esc="quotation.name"/></a>
                                                </td>
                                                <td class="col-xs-4 col-md-5">
                                                    <ul class="express_ul">
                                                        <t t-foreach="quotation.express_order" t-as="exp_id">
                                                        <li>
                                                            <p class="cpo_express_ul_p"><label class="cpo_titel_express">Provider :</label><span class="cpo_provider_name" t-field="exp_id.express_provider"/></p>
                                                            <p class="cpo_express_ul_p cpo-ml20"><label class="cpo_titel_express">NO. :</label><span class="cpo_provider_no" t-field="exp_id.express_number"/></p>
                                                            <a class="express_delect"><i class="fa fa-remove fa-x"></i></a>
                                                            <p style="clear:both"></p>
                                                        </li>
                                                        </t>
                                                    </ul>

                                                    <a class="get_order_num" data-toggle="modal" data-target="#myModal" style="display:block;width:44px;" t-att-id="quotation.id">
                                                        <i class="fa fa-plus fa-x"></i>Add
                                                    </a>
                                                </td>
                                                <td class="col-xs-4 col-md-4"><span t-field="quotation.date_order"/></td>
                                                <!--<td><span t-field="quotation.validity_date"/></td>-->

                                                <!--<td>-->
                                                  <!--<t t-if="quotation.state == 'cancel'">-->
                                                    <!--<span class="label label-default"><i class="fa fa-fw fa-remove"/> Cancelled</span>-->
                                                  <!--</t>-->
                                                  <!--<t t-if="quotation.validity_date and quotation.validity_date &lt; date">-->
                                                    <!--<span class="label label-default"><i class="fa fa-fw fa-clock-o"/> Expired</span>-->
                                                  <!--</t>-->
                                                <!--</td>-->
                                                <!--<td><span t-field="quotation.amount_total" t-options='{"widget": "monetary", "display_currency": quotation.pricelist_id.currency_id}'/>-->
                                                <!--</td>-->
                                            </tr>

                                        </t>
                                        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <form class="form-horizontal" role="form"
                                                                        method="POST"
                                                                        enctype="multipart/form-data"
                                                                        id="express_form">
                                                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                                        <div class="modal-header">
                                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&amp;times;</button>
                                                            <h4 class="modal-title" id="myModalLabel">Express Number</h4>
                                                        </div>
                                                        <div class="modal-body" id="modal_express">
                                                            <div class="form-group form_express cpo-none">
                                                                <!--<label for="inputPassword" class="control-label"><i>*</i>Order Number</label>-->
                                                                <div class="express_conter">
                                                                    <span class="order_number"></span>
                                                                </div>
                                                            </div>
                                                            <div class="form-group form_express">
                                                                <label for="inputPassword" class="control-label"><i>*</i>Express Company</label>
                                                                <div class="express_conter">
                                                                    <select class="form-control express_company">
                                                                        <option value="DHL">DHL</option>
                                                                        <option value="UPS">UPS</option>
                                                                        <option value="Fedex">FedEx</option>
                                                                    </select>
                                                                    <!--<input type="text" class="form-control express_company" id="inputPassword" placeholder="" maxlength="12"/>-->
                                                                </div>
                                                            </div>
                                                            <div class="form-group form_express" >
                                                                <label for="inputPassword" class="control-label"><i>*</i>Express Number</label>
                                                                <div class="express_conter">
                                                                    <input type="text" class="form-control express_number" id="inputPassword" placeholder="" maxlength="12"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                                            <a class="btn btn-primary express_btn" >confirm</a>
                                                            <!--<button type="submit" class="btn btn-primary" id="express_btn">Submit</button>-->
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </table>
                                </t>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading collapsed" role="tab" data-toggle="collapse" data-parent="#myCollapse1529734499041" data-target="#myCollapseTab1529734499042" aria-expanded="false">
                            <h4 class="panel-title o_default_snippet_text"> CPO Express No.
                                <i class="fa fa-plus"></i>
                                <small class="ml8"><span class='badge'><t t-esc="express_no.get('express_cpo_count')"/></span></small>
                            </h4>
                        </div>
                        <div class="panel-collapse collapse" role="tabpanel" id="myCollapseTab1529734499042" aria-expanded="false" style="height: 0px;">
                            <div class="panel-body">
                                <t t-if="not express_no.get('express_cpo_no')">
                                    <h4 class="text-center">There are no sales orders yet !</h4>
                                </t>
                                <t t-else="">
                                    <table class="table o_my_status_table get_express_table">
                                        <thead>
                                            <tr>
                                                <th>Quotation #</th>
                                                <th>Express</th>
                                                <th>Order Date</th>
                                                <!--<th></th>-->
                                            </tr>
                                        </thead>
                                        <t t-foreach="express_no.get('express_cpo_no')" t-as="quotation">
                                            <tr>
                                                <td>
                                                    <a t-attf-href="/my/orders/#{quotation.id}?#{keep_query()}" class="order_num"><t t-esc="quotation.name"/></a>
                                                </td>
                                                <td class="cpo-td-padding">
                                                    <ul class="express_ul">
                                                        <t t-if="not quotation.cpo_courier_number or not quotation.cpo_courier">

                                                        </t>
                                                        <t t-else="">
                                                            <li>
                                                                <p class="cpo_express_ul_p"><label class="cpo_titel_express">Provider :</label><span class="cpo_provider_name" t-field="quotation.cpo_courier"/></p>
                                                                <p class="cpo_express_ul_p cpo-ml20"><label class="cpo_titel_express">NO. :</label><span class="cpo_provider_no" t-field="quotation.cpo_courier_number"/></p>
                                                                <p style="clear:both"></p>
                                                            </li>
                                                        </t>
                                                        <!--</t>-->
                                                    </ul>
                                                </td>
                                                <td><span t-field="quotation.date_order"/></td>
                                                <!--<td><span t-field="quotation.validity_date"/></td>-->
                                            </tr>

                                        </t>

                                    </table>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </template>
    <template>
        <div class="table-responsive" id="express_order_detail">
            <table class="table table-hover o_my_status_table" id="get_express_table">
            <thead>
                <tr class="active">
                    <th>Quotation #</th>
                    <th>Express</th>
                    <!--<td>express Provider</td>-->
                    <!--<td>express Number</td>-->
                    <th>Order Date</th>
                    <!--<th>Valid Until</th>-->
                    <th></th>
                    <!--<th>Total</th>-->
                </tr>
            </thead>
            <t t-foreach="quotations" t-as="quotation">
                <tr>
                    <td>
                        <a t-attf-href="/my/orders/#{quotation.id}?#{keep_query()}" class="order_num"><t t-esc="quotation.name"/></a>
                    </td>
                    <td class="cpo-td-padding">
                        <ul class="express_ul">
                            <t t-foreach="quotation.express_order" t-as="exp_id">
                            <li style="height:30px;">
                                <p class="cpo_express_ul_p"><label class="cpo_titel_express">Provider :</label><span style="margin-left: 5px;" t-field="exp_id.express_provider"/></p>
                                <p class="cpo_express_ul_p"><label class="cpo_titel_express">NO. :</label><span style="margin-left: 10px;" t-field="exp_id.express_number"/></p>
                                <a class="express_delect"><i class="fa fa-remove fa-x"></i></a>
                                <p style="clear:both"></p>
                            </li>
                            </t>
                        </ul>

                        <a class="get_order_num" data-toggle="modal" data-target="#myModal" style="display:block;width:42px;">
                            <i class="fa fa-plus fa-x"></i>Add
                        </a>
                    </td>
                    <td><span t-field="quotation.date_order"/></td>
                    <td><span t-field="quotation.validity_date"/></td>

                    <!--<td>-->
                      <!--<t t-if="quotation.state == 'cancel'">-->
                        <!--<span class="label label-default"><i class="fa fa-fw fa-remove"/> Cancelled</span>-->
                      <!--</t>-->
                      <!--<t t-if="quotation.validity_date and quotation.validity_date &lt; date">-->
                        <!--<span class="label label-default"><i class="fa fa-fw fa-clock-o"/> Expired</span>-->
                      <!--</t>-->
                    <!--</td>-->
                    <!--<td><span t-field="quotation.amount_total" t-options='{"widget": "monetary", "display_currency": quotation.pricelist_id.currency_id}'/>-->
                    <!--</td>-->
                </tr>

            </t>
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <form class="form-horizontal" role="form"
                                            method="POST"
                                            enctype="multipart/form-data"
                                            id="express_form">
                                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&amp;times;</button>
                                <h4 class="modal-title" id="myModalLabel">Express Number</h4>
                            </div>
                            <div class="modal-body" id="modal_express">
                                <div class="form-group form_express">
                                    <label for="inputPassword" class="control-label"><i>*</i>Order Number</label>
                                    <div class="express_conter">
                                        <span class="order_number"></span>
                                    </div>
                                </div>
                                <div class="form-group form_express">
                                    <label for="inputPassword" class="control-label"><i>*</i>Express Company</label>
                                    <div class="express_conter">
                                        <select class="form-control express_company">
                                            <option value="DHL">DHL</option>
                                            <option value="UPS">UPS</option>
                                            <option value="Fedex">FedEx</option>
                                        </select>
                                        <!--<input type="text" class="form-control express_company" id="inputPassword" placeholder="" maxlength="12"/>-->
                                    </div>
                                </div>
                                <div class="form-group form_express" >
                                    <label for="inputPassword" class="control-label"><i>*</i>Express Number</label>
                                    <div class="express_conter">
                                        <input type="text" class="form-control express_number" id="inputPassword" placeholder="" maxlength="12"/>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                <a class="btn btn-primary express_btn" id="">confirm</a>
                                <!--<button type="submit" class="btn btn-primary" id="express_btn">Submit</button>-->
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </table>
        </div>

        <div t-if="pager" class="o_portal_pager text-center" id="get_page">
          <t t-call="website.pager"/>
        </div>
    </template>

    <!-- 后台上传快递填写 -->
    <template id="portal_my_express_cpo" name="CPO Express">
        <t t-call="website_portal.portal_layout">
            <div class="page-header">
                <span class="h3">Your Quotations</span>
                <t t-call="website_portal.portal_searchbar"/>
            </div>
            <t t-if="not quotations">
                <p>There are currently no quotations for your account.</p>
            </t>
            <t t-if="quotations">
                <t t-call="website_cpo_sale.cpo_express_merchant_offer"/>
            </t>
         </t>
    </template>

    <!-- 后台上传快递填写 -->
    <template id="cpo_express_merchant_offer">
        <div class="table-responsive" id="express_order_detail">
            <table class="table table-hover o_my_status_table" id="get_express_table">
            <thead>
                <tr class="active">
                    <th>Quotation #</th>
                    <th>Express</th>
                    <th>Order Date</th>
                    <th></th>
                </tr>
            </thead>
            <t t-foreach="quotations" t-as="quotation">
                <tr>
                    <td>
                        <a t-attf-href="/my/orders/#{quotation.id}?#{keep_query()}" class="order_num"><t t-esc="quotation.name"/></a>
                    </td>
                    <td>
                        <ul class="express_ul">
                            <!--<t t-foreach="quotation.express_order" t-as="exp_id">-->
                            <t t-if="not quotation.cpo_courier_number or not quotation.cpo_courier">
                                <!--<li>-->
                                    <!--<p style="display:inline-block;"><label class="cpo_titel_express">Provider :</label><span style="margin-left: 5px;" t-field="quotation.cpo_courier_number"/></p>-->
                                    <!--<p style="display:inline-block;margin-left: 20px;"><label class="cpo_titel_express">NO. :</label><span style="margin-left: 10px;" t-field="quotation.cpo_courier"/></p>-->
                                    <!--<p style="clear:both"></p>-->
                                <!--</li>-->
                            </t>
                            <t t-else="">
                                <li>
                                    <p style="display:inline-block;"><label class="cpo_titel_express">Provider :</label><span style="margin-left: 5px;" t-field="quotation.cpo_courier_number"/></p>
                                    <p style="display:inline-block;margin-left: 20px;"><label class="cpo_titel_express">NO. :</label><span style="margin-left: 10px;" t-field="quotation.cpo_courier"/></p>
                                    <p style="clear:both"></p>
                                </li>
                            </t>
                            <!--</t>-->
                        </ul>
                    </td>
                    <td><span t-field="quotation.date_order"/></td>
                    <td><span t-field="quotation.validity_date"/></td>
                </tr>

            </t>

        </table>
        </div>

        <div t-if="pager" class="o_portal_pager text-center" id="get_page">
          <t t-call="website.pager"/>
        </div>
    </template>

    <!--my_bom-->
    <template id="bom_to_check_bom_ref_form" name="bom check bom ref from">
        <form method="POST"
            action="/pcba/ele/check_attach_file"
            enctype="multipart/form-data"
            class="form-inline hidden"
            id="cpo_bom_check_ref_form_act">
            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
            <input type="hidden" name="atta_id"/>
            <input type="hidden" name="return_url" t-att-value="ret_url"/>
        </form>
    </template>

    <template id="portal_my_bom" name="My BOM">
      <t t-call="website_portal.portal_layout">
        <div class="page-header">
            <span class="h3">Your BOM</span>
            <!--<a class="order_upload_btn pull-right" title="Upload Presentation">-->
                <!--Add BOM file-->
                <!--<input type="file" name="bom_file" class="order_upload_file" id="1"/>-->
            <!--</a>-->
            <a class="btn btn-primary oe_electron_js_upload upload_btn pull-right" title="Upload Presentation" file_type="BOM File">
                <!--<span class="fa fa-hand-o-down fa-lg"></span>-->
                <i class="fa fa-cloud-upload"></i> Upload
            </a>
            <t t-call="website_portal.portal_searchbar"/>
            <t t-call="website_cpo_sale.bom_to_check_bom_ref_form">
                <t t-set="ret_url" t-value="'/my/bom'"/>
            </t>
        </div>
        <t t-if="not boms">
            <p>There are currently no bom for your account.</p>
        </t>
        <t t-if="boms">
            <div class="table-responsive" id="bom_order_detail">
                <table class="table table-hover o_my_status_table table-responsive" id="get_express_table">
                <thead>
                  <tr class="active">
                      <th>File name</th>
                      <th>State</th>
                      <!--<td>express Provider</td>-->
                      <!--<td>express Number</td>-->
                      <th>Order Date</th>
                      <!--<th>Valid Until</th>-->
                      <th></th>
                      <!--<th>Total</th>-->
                    </tr>
                </thead>
                <tbody>
                <t t-foreach="boms" t-as="bom">

                    <tr>
                        <td>
                            <!--<a t-attf-href="/my/bom/#{bom.id}?#{keep_query()}" class="order_num"><t t-esc="bom.bom_file_name"/></a>-->
                            <a t-attf-href="/my/bom/#{ slug(bom) }#{keep_query()}" class="order_num" t-if="bom.state!='draft'"><t t-esc="bom.bom_file_name"/></a>
                            <a class="order_num" t-if="bom.state=='draft'"><t t-esc="bom.bom_file_name"/></a>

                        </td>
                        <td>
                            <span t-field="bom.state"/>
                        </td>
                        <td>
                            <form method="POST"
                                action="/pcba/ele/check_attach_file"
                                enctype="multipart/form-data"
                                class="form-inline"
                                id="pcb_form_act">
                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                                <input type="hidden" name="atta_id" t-att-value="bom_att_ids.get(bom.id)"/>
                                <input type="hidden" name="return_url" value="/my/bom"/>
                                <!--<span class="fa fa-hand-o-down fa-lg" ></span>-->
                                <button type="submit" class="btn btn-default submit btn-primary" t-if="bom.state=='draft'" id="check_file_atta">Check</button>
                            </form>
                            <span t-field="bom.create_date"/>
                        </td>
                    </tr>

                </t>
                </tbody>
            </table>
            </div>

            <div t-if="pager" class="o_portal_pager text-center" id="get_page">
              <t t-call="website.pager"/>
            </div>
        </t>
      </t>
    </template>
    <!-- 生产制造时的订单状态 -->
    <template id="portal_my_manufacturing" name="Order Manufacturing">
        <t t-call="website_portal.portal_layout">
            <div class="page-header">
                <span class="h3">Your Order in manufacturing</span>
                <t t-call="website_portal.portal_searchbar"/>
            </div>
            <t t-if="not pcb and not pcba and not all_order">
                <p>There are currently no Order in manufacturing for your account.</p>
            </t>
            <div class="table-responsive" id="order_in_manufact">
                <div class="panel-group" role="tablist" id="myCollapse1529734499041">
                    <t t-if="pcb">
                        <div class="panel panel-default">
                        <div class="panel-heading" role="tab" data-toggle="collapse"
                             data-parent="#myCollapse1529734499041" data-target="#myCollapseTab1529734499041"
                             aria-expanded="true">
                            <h4 class="panel-title o_default_snippet_text">PCB order in manufacturing
                                <i class="fa fa-minus"></i>
                                <small class="ml8">
                                    <span class='badge'>
                                        <t t-raw="pcb_qty"/>
                                    </span>
                                </small>
                            </h4>
                        </div>
                        <div class="panel-collapse collapse in" role="tabpanel" id="myCollapseTab1529734499041"
                             aria-expanded="true" style="">
                            <div class="panel-body">
                                <table class="table table-hover o_my_status_table get_express_table">
                                    <thead>
                                        <!--<tr class="active">-->
                                        <tr>
                                            <th>Sales Order</th>
                                            <th>PCB in production</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="pcb" t-as="pcb_d">
                                            <tr>
                                                <td><t t-esc="pcb_d.name"/></td>
                                                <td class="text-center"><t t-esc="pcb_d.pcb_flow"/></td>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    </t>
                    <t t-if="pcba">
                        <div class="panel panel-default">
                        <div class="panel-heading" role="tab" data-toggle="collapse"
                             data-parent="#myCollapse1529734499041" data-target="#myCollapseTab1529734499043"
                             aria-expanded="true">
                            <h4 class="panel-title o_default_snippet_text">PCBA order in manufacturing
                                <i class="fa fa-minus"></i>
                                <small class="ml8">
                                    <span class='badge'>
                                        <t t-raw="pcba_qty"/>
                                    </span>
                                </small>
                            </h4>
                        </div>
                        <div class="panel-collapse collapse" role="tabpanel" id="myCollapseTab1529734499043"
                             aria-expanded="true" style="">
                            <div class="panel-body">
                                <table class="table table-hover o_my_status_table get_express_table">
                                    <thead>
                                        <!--<tr class="active">-->
                                        <tr>
                                            <th>Sales Order</th>
                                            <th>PCBA in production</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="pcba" t-as="pcba_d">
                                            <tr>
                                                <td><t t-esc="pcba_d.name"/></td>
                                                <td class="text-center"><t t-esc="pcba_d.pcba_flow"/></td>
                                                <!--<td class="text-center"><t t-esc="pcba_d.pcba_flow"/></td>-->
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    </t>
                    <t t-if="all_order">
                        <div class="panel panel-default">
                        <div class="panel-heading" role="tab" data-toggle="collapse"
                             data-parent="#myCollapse1529734499041" data-target="#myCollapseTab1529734499042"
                             aria-expanded="true">
                            <h4 class="panel-title o_default_snippet_text">All order in manufacturing
                                <i class="fa fa-minus"></i>
                                <small class="ml8">
                                    <span class='badge'>
                                        <t t-raw="all_qty"/>
                                    </span>
                                </small>
                            </h4>
                        </div>
                        <div class="panel-collapse collapse" role="tabpanel" id="myCollapseTab1529734499042"
                             aria-expanded="true" style="">
                            <div class="panel-body">
                                <table class="table table-hover o_my_status_table get_express_table">
                                    <thead>
                                        <!--<tr class="active">-->
                                        <tr>
                                            <th>Sales Order</th>
                                            <th>PCB in production</th>
                                            <th>PCBA in production</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="all_order" t-as="all_d">
                                            <tr>
                                                <td><t t-esc="all_d.name"/></td>
                                                <td class="text-center"><t t-esc="all_d.pcb_flow"/></td>
                                                <td class="text-center"><t t-esc="all_d.pcba_flow"/></td>
                                            </tr>
                                        </t>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    </t>
                </div>
            </div>
            <div t-if="pager" class="o_portal_pager text-center" id="get_page">
              <t t-call="website.pager"/>
            </div>
        </t>
    </template>
    <!-- 个人中心优惠券 -->
    <template id="portal_my_coupon" name="My Coupon">
        <t t-call="website_portal.portal_layout">
            <div class="page-header">
                <span class="h3">Your Coupon</span>
                <t t-call="website_portal.portal_searchbar"/>
                <t t-call="website_cpo_sale.bom_to_check_bom_ref_form">
                    <t t-set="ret_url" t-value="'/my/coupon'"/>
                </t>
            </div>
            <t t-if="not rows">
                <p>There are currently no coupon for your account.</p>
            </t>
            <t t-if="rows">
                <div class="table-responsive" id="coupon_order">
                    <div id="coupon_line_list">
                        <div class="cpo-index-coupon">
                            <t t-foreach="rows" t-as="row">
                                <div class="cpo-coupon-box">
                                    <div class="cpo-coupon-content clearfix">
                                        <div class="cpo-coupon-line">
                                            <t t-if="row['cpo_card_bool'] == True">
                                                <t t-if="row['cpo_discount_type'] == '%'">
                                                    <div class="coupon-money">
                                                        <!--<span class="fa fa-dollar cpo-coupon-currency"></span>-->
                                                        <span class="cpo-coupon-money">
                                                            <t t-esc="row['cpo_card_money']"/>
                                                        </span>
                                                        <span class="cpo-coupon-currency">%</span>
                                                    </div>
                                                </t>
                                                <t t-else="">
                                                    <div class="coupon-money">
                                                        <span class="fa fa-dollar cpo-coupon-currency"></span>
                                                        <span class="cpo-coupon-money">
                                                            <t t-esc="row['cpo_card_money']"/>
                                                        </span>
                                                    </div>
                                                </t>
                                            </t>
                                            <t t-else="">
                                                <t t-if="row['cpo_discount_type'] == '%'">
                                                    <div class="coupon-money">
                                                        <span class="cpo-coupon-money">
                                                            <t t-esc="row['cpo_no_card_money']"/>
                                                        </span>
                                                        <span class="cpo-coupon-currency">%</span>
                                                    </div>
                                                </t>
                                                <t t-else="">
                                                    <div class="coupon-money">
                                                        <span class="fa fa-dollar cpo-coupon-currency"></span>
                                                        <span class="cpo-coupon-money">
                                                            <t t-esc="row['cpo_no_card_money']"/>
                                                        </span>
                                                    </div>
                                                </t>
                                            </t>
                                            <div class="coupon-date">
                                                <span class="coupon-start-date">
                                                    <t t-esc="row['cpo_con_start_time']"/>
                                                </span>
                                                <i>~</i>
                                                <span class="coupon-end-date">
                                                    <t t-esc="row['cpo_con_end_time']"/>
                                                </span>
                                            </div>
                                        </div>
                                        <a class="cpo-coupon-order" t-att-id="row['id']" href="/pcb"></a>
                                    </div>
                                </div>
                            </t>
                        </div>
                        <!--<t t-foreach="rows" t-as="row">-->
                            <!--<div class="coupon-line clearfix">-->
                                <!--<div class="coupon-box-top clearfix">-->
                                    <!--<div class="coupon-top-left">-->
                                        <!--<t t-if="row.cpo_discount_type == 'money'">-->
                                            <!--<span class="coupon-unit">$</span>-->
                                            <!--<t t-if="row.cpo_no_card_bool">-->
                                                <!--<span class="coupon-money"><t t-esc="row.cpo_no_card_money"/></span>-->
                                            <!--</t>-->
                                            <!--<t t-else="">-->
                                                <!--<span class="coupon-money"><t t-esc="row.cpo_card_money"/></span>-->
                                            <!--</t>-->

                                        <!--</t>-->
                                        <!--<t t-else="">-->
                                            <!--<t t-if="row.cpo_no_card_bool">-->
                                                <!--<span class="coupon-money"><t t-esc="row.cpo_no_card_money"/></span>-->
                                            <!--</t>-->
                                            <!--<t t-else="">-->
                                                <!--<span class="coupon-money"><t t-esc="row.cpo_card_money"/></span>-->
                                            <!--</t>-->
                                            <!--<span class="coupon-unit">%</span>-->
                                        <!--</t>-->
                                    <!--</div>-->
                                    <!--<div class="coupon-top-right">-->
                                        <!--<div class="coupon-date"><t t-esc="row.cpo_con_start_time"/> ~ <t t-esc="row.cpo_con_end_time"/></div>-->
                                        <!--<t t-if="row.cpo_no_card_bool">-->
                                            <!--<div class="coupon-condition"></div>-->
                                        <!--</t>-->
                                        <!--<t t-else="">-->
                                            <!--<div class="coupon-condition">Full <t t-esc="row.cpo_card_term" /> available</div>-->
                                        <!--</t>-->
                                    <!--</div>-->
                                <!--</div>-->
                                <!--<div class="coupon-box-bottom">-->
                                    <!--<a class="coupon-btn" href="/pcba">Go to use > </a>-->
                                <!--</div>-->
                            <!--</div>-->
                        <!--</t>-->
                    </div>

                </div>
                <div t-if="pager" class="o_portal_pager text-center" id="get_page">
                  <t t-call="website.pager"/>
                </div>
            </t>
        </t>
    </template>
    <!-- BOM  个人中心BOM管理 -->
    <template id="bom_followup" name="My BOM form">
        <t t-call="website.layout">
            <div id="wrap">
                <div class="container website_my_bom_form">
                    <div class="oe_structure">
                        <ol class="breadcrumb mt8">
                            <li><a href="/my/home"><i class="fa fa-home"/></a></li>
                            <li> <a t-attf-href="/my/bom"> My Bom </a> </li>
                            <li> <span class="h5"><t t-esc="bom.name"/></span> </li>
                        </ol>
                        <t t-if="bom">
                            <div class="table-responsive" id="bom_order_detail">
                                <div class="row" id="bom_order_detail_row">
                                    <div class="col-sm-3">
                                        <form action="/pcba" class="js_add_cart_variantsx" method="POST">
                                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                                            <!--<input type="number" name="pcb_quantity" t-att-value="pcb_quantity" />-->
                                            <div style="display: none">
                                                <input name="bom_id" t-att-value="bom.id"/>
                                            </div>
                                            <div class="js_productx" style="margin-bottom: 15px;">
                                                <a id="bom_to_get_pcba_price" class="btn btn-primary mt1 js_check_product" href="#">Get PCBA Quotation</a>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="text-left cpo_text_right pull-left">
                                        File Name:<span class="order_num"><t t-esc="bom.bom_file_name"/></span>
                                    </div>
                                    <!--<span t-field="bom.state"/>-->
                                    <div class="text-right cpo_text_right pull-right">
                                        Date: <span t-field="bom.create_date"/>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Item </th>
                                                <th>Manufacturer P/N</th>
                                                <th>Vendor P/N</th>
                                                <th>Description</th>
                                                <th>Manufacturer</th>
                                                <th>Manufacturer P/N</th>
                                                <th>Packaging</th>
                                                <th>Remark</th>
                                                <th>Bom Supply</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-foreach="bom_line" t-as="obj">
                                                <tr>
                                                    <td><t t-esc="obj.cpo_item"/></td>
                                                    <td><t t-esc="obj.cpo_mfr_p_n"/></td>
                                                    <td><t t-esc="obj.cpo_vendor_p_n"/></td>
                                                    <td><t t-esc="obj.cpo_description"/></td>
                                                    <td><t t-esc="obj.cpo_mfr"/></td>
                                                    <td><t t-esc="obj.cpo_mfr_p_n"/></td>
                                                    <td><t t-esc="obj.cpo_package"/></td>
                                                    <td><t t-esc="obj.cpo_remark"/></td>
                                                    <td><t t-esc="obj.bom_supply"/></td>
                                                </tr>
                                            </t>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </t>
                        </div>
                    </div>
                </div>
                <div t-if="pager" class="o_portal_pager text-center" id="get_page">
                    <t t-call="website.pager"/>
                </div>
        </t>
    </template>

    <!--Order details--> <!--My account///Sale Order Details-->
    <template id="website_portal_sale.orders_followup" name="Sales Order">
        <t t-call="website.layout">
            <div id="wrap">
            <div class="container" style="margin-top: 0;">
                <div class="oe_structure">
                    <div class="row">
                        <div class="col-sm-6">
                            <ol class="breadcrumb mt8">
                                <li><a href="/my/home"><i class="fa fa-home fa-lg"/></a></li>
                                <!--<li>-->
                                    <!--&lt;!&ndash;需要恢复sales orders时恢复此行，删除下一行&ndash;&gt;-->
                                  <!--&lt;!&ndash;<a t-attf-href="/my/#{'quotes' if order.state == 'sent' else 'orders'}?{{ keep_query()}}">&ndash;&gt;-->
                                    <!--<a t-attf-href="/my/#{'quotes' if order.state == 'sent' else 'home'}?{{ keep_query()}}">-->
                                        <!--<t t-if="order.state == 'sent'">-->
                                            <!--My Quotations-->
                                        <!--</t>-->
                                        <!--<t t-if="order.state != 'sent'">-->
                                            <!--My Sales Orders-->
                                        <!--</t>-->
                                    <!--</a>-->
                                <!--</li>-->
                                <li>
                                    <t t-if="order.state == 'sent'">Quotation</t>
                                    <t t-if="order.state != 'sent'">Order</t>
                                    <t t-esc="order.name"/>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
                <div id="optional_placeholder"></div>
                <div class="container">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-md-12">
                                    <h4>
                                        <t t-call='website_portal.record_pager'/>
                                        <t t-if="order.state == 'sent'">
                                            Quotation
                                        </t>
                                        <t t-if="order.state != 'sent'">Order</t>
                                        <span t-esc="order.name"/>
                                    </h4>
                                </div>
                            </div>
                        </div>
                        <div class="panel-body">
                            <div class="mb8">
                                <strong>Date:</strong> <span t-field="order.create_date" t-options='{"widget": "date"}'/>
                            </div>
                            <div class='row'>
                                <div class="col-md-6">
                                    <div class="fa fa-plus cpo_address_order_title">
                                        <strong>Invoicing Address</strong>
                                    </div>
                                    <div class="cpo_address_order_detail cpo-none">
                                        <address t-field="order.partner_invoice_id" t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
                                    </div>
                                    <t t-set="invoices" t-value="[i for i in order.invoice_ids if i.state not in ['draft', 'cancel']]"/>
                                    <t t-if="invoices">
                                        <div><strong>Invoices</strong></div>
                                        <div>
                                        <t t-foreach="invoices" t-as="i">
                                            <t t-set="report_url" t-value="'/my/invoices/pdf/%s' % i.id"/>
                                                <div>
                                                    <a t-att-href="report_url"><span class="fa fa-download"/></a>
                                                    <a t-att-href="report_url"><span t-esc="i.number"/></a>
                                                    <span class="text-muted" t-field="i.date_invoice"/>
                                                    <t t-if="i.state == 'paid'">
                                                        <span class="label label-success orders_label_text_align"><i class="fa fa-fw fa-check"/> Paid</span>
                                                    </t>
                                                    <t t-if="i.state != 'paid'">
                                                        <span class="label label-info orders_label_text_align"><i class="fa fa-fw fa-clock-o"/> Waiting</span>
                                                    </t>
                                                </div>
                                            </t>
                                        </div>
                                    </t>
                                </div>
                                <div id="shipping_address" class="col-md-6">
                                    <div class="fa fa-plus cpo_address_order_title">
                                        <strong>Shipping Address</strong>
                                    </div>
                                    <div class="cpo_address_order_detail cpo-none">
                                        <address t-field="order.partner_shipping_id" t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
                                    </div>
                                </div>
                            </div>
                            <hr/>
                        <!--<t t-if="order.quotation_line">-->
                            <!--<t t-call="website_cpo_sale.sale_quotation_line"/>-->
                        <!--</t>-->
                        <!-- Order Line-->
                        <t t-if="order_line_type == 'PCBA'">
                            <div class="row orders_vertical_align">
                                <div class="col-xs-5 col-md-2">
                                    <strong>File Name</strong>
                                </div>
                                <div class="hidden-sm hidden-xs col-md-1 text-right">
                                    <strong>Quantity</strong>
                                </div>
                                <div class="hidden-sm hidden-xs col-md-1 text-right" style="padding: 0 0">
                                    <strong>Bare board</strong>
                                </div>
                                <div class="hidden-sm hidden-xs col-md-1 text-right" style="padding: 0 0">
                                    <strong>Components</strong>
                                </div>
                                <!--<div class="hidden-sm hidden-xs col-md-1 text-right">-->
                                  <!--<strong>BOM material fee</strong>-->
                                <!--</div>-->
                                <div class="hidden-sm hidden-xs col-md-1 text-right">
                                    <strong>Assembly</strong>
                                </div>
                                <div class="hidden-sm hidden-xs col-md-1 text-right" >
                                    <strong>Stencil</strong>
                                </div>
                                <div class="hidden-sm hidden-xs col-md-1 text-right" style="padding: 0 0">
                                    <strong>Management</strong>
                                </div>
                                <div class="hidden-sm col-xs-3 col-md-1 text-right">
                                    <strong>Shipping</strong>
                                </div>
                                <div class="hidden-sm hidden-xs col-md-1 text-right">
                                    <strong>Lead Time</strong>
                                </div>
                                <div class="col-xs-4 col-md-2 cpo-xs-4-span text-right">
                                    <strong>Price subtotal</strong>
                                </div>
                            </div>
                            <t t-foreach="order.order_line" t-as="ol">
                            <div class="row orders_vertical_align">
                                <!--<div class="visible-lg col-lg-1 text-center">-->
                                  <!--<span t-field="ol.product_image" t-options="{'widget': 'image', 'class': 'img-rounded', 'style':'width: 48px;height:48px'}" />-->
                                <!--</div>-->
                                <div id='product_name' class="col-xs-5 col-md-2">
                                <!--<span t-esc="ol.product_id.name"/>-->
                                    <strong t-if="not ol.bom_file_name" t-esc="ol.name" />
                                <!--<strong t-if="ol.bom_file_name" t-esc="ol.bom_file_name" />-->
                                </div>
                                <div class="hidden-sm hidden-xs col-md-1 text-right">
                                    <t t-if="ol._name == 'sale.order.line'">
                                        <span t-esc="ol.product_uom_qty"/>
                                    </t>
                                    <t t-if="ol._name == 'account.invoice.line'">
                                        <span t-esc="ol.quantity"/>
                                    </t>
                                </div>
                              <!--<div class="col-xs-2 text-right">-->
                                <!--<span t-field="ol.price_unit" t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/>-->
                              <!--</div>-->
                                <div class="hidden-sm hidden-xs col-md-1 text-right">
                                    <t t-if="ol._name == 'sale.order.line'">
                                        <span t-esc="ol.pcb_plate_fee"/>
                                    </t>
                                <!--<t t-if="ol._name == 'account.invoice.line'">-->
                                  <!--<span t-esc="ol.quantity"/>-->
                                <!--</t>-->
                                </div>
                                <div class="hidden-sm hidden-xs col-md-1 text-right">
                                    <t t-if="ol._name == 'sale.order.line'">
                                        <span t-esc="ol.bom_material_fee"/>
                                    </t>
                                <!--<t t-if="ol._name == 'account.invoice.line'">-->
                                  <!--<span t-esc="ol.quantity"/>-->
                                <!--</t>-->
                                </div>
                                <div class="hidden-sm hidden-xs col-md-1 text-right">
                                    <t t-if="ol._name == 'sale.order.line'">
                                        <span t-esc="ol.smt_assembly_fee"/>
                                    </t>
                                <!--<t t-if="ol._name == 'account.invoice.line'">-->
                                  <!--<span t-esc="ol.quantity"/>-->
                                <!--</t>-->
                                </div>
                                <div class="hidden-sm hidden-xs col-md-1 text-right">
                                    <t t-if="ol._name == 'sale.order.line'">
                                        <span t-esc="ol.stencil_fee"/>
                                    </t>
                                <!--<t t-if="ol._name == 'account.invoice.line'">-->
                                  <!--<span t-esc="ol.quantity"/>-->
                                <!--</t>-->
                                </div>
                                <div class="hidden-sm hidden-xs col-md-1 text-right">
                                    <t t-if="ol._name == 'sale.order.line'">
                                        <span t-esc="ol.bom_material_manage_fee"/>
                                    </t>
                                <!--<t t-if="ol._name == 'account.invoice.line'">-->
                                  <!--<span t-esc="ol.quantity"/>-->
                                <!--</t>-->
                                </div>
                                <div class="col-md-1 col-xs-3 text-right">
                                    <t t-if="ol._name == 'sale.order.line'">
                                        <span t-esc="order.shipping_fee"/>
                                    </t>
                                </div>
                                <div class="hidden-sm hidden-xs col-md-1 text-right">
                                    <t t-if="ol._name == 'sale.order.line'">
                                        <span t-esc="ol.etdel"/>
                                    </t>
                                </div>
                                <div class="col-md-2 col-xs-4 cpo-xs-4-span text-right">
                                    <span t-field="ol.price_subtotal" t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/>
                                </div>
                            </div>
                            </t>
                        </t>
                        <t t-elif="order_line_type == 'PCB'">
                            <t t-call="website_cpo_sale.sale_quotation_line"/>
                        </t>
                        <t t-else="">
                            <t t-call="website_cpo_sale.sale_stencil_line"/>
                        </t>

                      <hr/>

                      <div class="row">
                        <div class="col-md-6">
                          <div>
                            <!--<strong>Contact</strong>-->
                          </div>
                          <div t-field="order.user_id.partner_id" t-options='{"widget": "contact", "fields": ["email", "phone"]}'/>
                          <br/>
                        </div>
                        <div class="col-md-6">
                          <!--<div class="row">-->
                            <!--<div class="col-md-9 col-xs-8 text-right">-->
                              <!--Untaxed Amount:-->
                            <!--</div>-->
                            <!--<div class="col-md-3 col-xs-4 text-right">-->
                              <!--<span t-field="order.amount_untaxed" t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/>-->
                            <!--</div>-->
                          <!--</div>-->
                          <!--<div class="row">-->
                            <!--<div class="col-md-9 col-xs-8 text-right">-->
                              <!--Taxes:-->
                            <!--</div>-->
                            <!--<div class="col-md-3 col-xs-4 text-right">-->
                              <!--<span t-field="order.amount_tax" t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/>-->
                            <!--</div>-->
                          <!--</div>-->
                          <div class="row">
                            <div class="col-md-9 col-xs-8 text-right">
                              <span>Shipping:</span>
                            </div>
                            <div class="col-md-3 col-xs-4 text-right">
                              <strong><span t-field="order.shipping_fee" t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/></strong>
                            </div>
                            <div class="col-md-9 col-xs-8 text-right">
                              <span>Discount amount:</span>
                            </div>
                            <div class="col-md-3 col-xs-4 text-right">
                              <strong><span t-field="order.discount_total" t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/></strong>
                            </div>
                            <div class="col-md-9 col-xs-8 text-right">
                              <strong>Total:</strong>
                            </div>
                            <div class="col-md-3 col-xs-4 text-right">
                              <strong><span t-field="order.amount_total" t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/></strong>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

              </div>
              <div class="oe_structure mb32"/>
          </div>
        </div>
      </t>
    </template>

    <!-- Order Line-->
    <template id="sale_order_line">
        <div class="row">
            <div class="col-md-1">
                <strong>Product</strong>
            </div>
            <div class="hidden-sm hidden-xs col-md-2 text-right">
                <strong>Material fee</strong>
            </div>
            <div class="hidden-sm hidden-xs col-md-2 text-right">
                <strong>Assembly fee</strong>
            </div>
            <!--<div class="hidden-sm hidden-xs col-md-1 text-right">-->
              <!--<strong>BOM material fee</strong>-->
            <!--</div>-->
            <div class="hidden-sm hidden-xs col-md-1 text-right">
                <strong>Test fee</strong>
            </div>
            <div class="hidden-sm hidden-xs col-md-1 text-right">
                <strong>Jig fee</strong>
            </div>
            <div class="hidden-sm hidden-xs col-md-1 text-right">
                <strong>Stencil fee</strong>
            </div>
            <div class="hidden-sm hidden-xs col-md-2 text-right">
                <strong>Quantity</strong>
            </div>
            <div class="hidden-sm hidden-xs col-md-2 text-right">
                <strong>Subtotal</strong>
            </div>
        </div>
        <t t-foreach="order.order_line" t-as="ol">
        <div class="row orders_vertical_align">
            <!--<div class="visible-lg col-lg-1 text-center">-->
              <!--<span t-field="ol.product_image" t-options="{'widget': 'image', 'class': 'img-rounded', 'style':'width: 48px;height:48px'}" />-->
            <!--</div>-->
            <div id='product_name' class="col-md-1">
            <!--<span t-esc="ol.product_id.name"/>-->
                <strong t-if="not ol.bom_file_name" t-esc="ol.name" />
            <!--<strong t-if="ol.bom_file_name" t-esc="ol.bom_file_name" />-->
            </div>
          <!--<div class="col-xs-2 text-right">-->
            <!--<span t-field="ol.price_unit" t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/>-->
          <!--</div>-->
            <div class="col-xs-2 text-right">
                <t t-if="ol._name == 'sale.order.line'">
                    <span t-esc="ol.bom_material_fee"/>
                </t>
            <!--<t t-if="ol._name == 'account.invoice.line'">-->
              <!--<span t-esc="ol.quantity"/>-->
            <!--</t>-->
            </div>
            <div class="col-xs-2 text-right">
                <t t-if="ol._name == 'sale.order.line'">
                    <span t-esc="ol.smt_assembly_fee"/>
                </t>
            <!--<t t-if="ol._name == 'account.invoice.line'">-->
              <!--<span t-esc="ol.quantity"/>-->
            <!--</t>-->
            </div>
            <div class="col-xs-1 text-right">
                <t t-if="ol._name == 'sale.order.line'">
                    <span t-esc="ol.test_tool_fee"/>
                </t>
            <!--<t t-if="ol._name == 'account.invoice.line'">-->
              <!--<span t-esc="ol.quantity"/>-->
            <!--</t>-->
            </div>
            <div class="col-xs-1 text-right">
                <t t-if="ol._name == 'sale.order.line'">
                    <span t-esc="ol.jig_tool_fee"/>
                </t>
            <!--<t t-if="ol._name == 'account.invoice.line'">-->
              <!--<span t-esc="ol.quantity"/>-->
            <!--</t>-->
            </div>
            <div class="col-xs-1 text-right">
                <t t-if="ol._name == 'sale.order.line'">
                    <span t-esc="ol.stencil_fee"/>
                </t>
            <!--<t t-if="ol._name == 'account.invoice.line'">-->
              <!--<span t-esc="ol.quantity"/>-->
            <!--</t>-->
            </div>
            <div class="col-xs-2 text-right">
                <t t-if="ol._name == 'sale.order.line'">
                    <span t-esc="ol.product_uom_qty"/>
                </t>
                <t t-if="ol._name == 'account.invoice.line'">
                    <span t-esc="ol.quantity"/>
                </t>
            </div>
            <div class="col-md-2 col-xs-1 text-right">
                <span t-field="ol.price_subtotal" t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/>
            </div>
        </div>
        </t>
    </template>
    <!-- Quotation Line-->
    <template id="sale_quotation_line">

        <div class="row" id="pcb_sale_quotation_line">
            <div class="col-xs-6 col-md-2">
                <strong>File Name</strong>
            </div>
            <div class="hidden-sm hidden-xs col-md-1 text-left">
                <strong>Quantity</strong>
            </div>
            <div class="hidden-sm hidden-xs col-md-1 text-left">
                <strong>Unit Price</strong>
            </div>
            <div class="hidden-sm hidden-xs col-md-1 text-left">
                <strong>Set up</strong>
            </div>
            <!--<div class="hidden-sm hidden-xs col-md-1 text-left">-->
                <!--<strong>Test Fee</strong>-->
            <!--</div>-->
            <div class="hidden-sm hidden-xs col-md-2 text-left">
                <strong>E-test tooling</strong>
            </div>
            <div class="col-xs-2 col-md-1 text-left">
                <strong>Shipping</strong>
            </div>
            <div class="hidden-sm hidden-xs col-md-1 text-left">
                <strong>Lead Time</strong>
            </div>
            <div class="hidden-sm hidden-xs col-md-1 text-right">
                <strong>Stencil</strong>
            </div>
            <div class="col-xs-4 col-md-2 text-right">
                <strong>Total Amount</strong>
            </div>
            <!--<div class="hidden-sm hidden-xs col-md-2 text-right">-->
                <!--<strong>Quantity</strong>-->
            <!--</div>-->
            <!--<div class="hidden-sm hidden-xs col-md-2 text-right">-->
                <!--<strong>Subtotal</strong>-->
            <!--</div>-->
        </div>
        <t t-foreach="order.quotation_line" t-as="ol">
            <div class="row orders_vertical_align">
                <!--<div class="visible-lg col-lg-1 text-center">-->
                  <!--<span t-field="ol.product_image" t-options="{'widget': 'image', 'class': 'img-rounded', 'style':'width: 48px;height:48px'}" />-->
                <!--</div>-->
                <div id='product_name' class="col-xs-6 col-md-2">
                <span t-esc="ol.customer_file_name"/>
                    <!--<strong t-if="not ol.bom_file_name" t-esc="ol.name" />-->
                <!--<strong t-if="ol.bom_file_name" t-esc="ol.bom_file_name" />-->
                </div>
                <div class="hidden-sm hidden-xs col-xs-1 col-md-1 text-left">
                    <t t-if="ol._name == 'sale.quotation.line'">
                        <span t-esc="ol.product_uom_qty"/>
                    </t>
                </div>
                <div class="hidden-sm hidden-xs col-xs-1 col-md-1 text-left">
                    <t t-if="ol._name == 'sale.quotation.line'">
                        <b class="mr5">$</b><span t-esc="ol.price_unit"/>
                    </t>
                </div>
                <div class="hidden-sm hidden-xs col-xs-1 col-md-1 text-left">
                    <t t-if="ol._name == 'sale.quotation.line'">
                        <b class="mr5">$</b><span t-esc="ol.engine_fee"/>
                    </t>
                </div>
                <!--<div class="col-xs-1 text-left">-->
                    <!--<t t-if="ol._name == 'sale.quotation.line'">-->
                        <!--<span t-esc="test_tooling_fee"/>-->
                    <!--</t>-->
                <!--</div>-->
                <div class="hidden-sm hidden-xs col-xs-2 col-md-2 text-left">
                    <t t-if="ol._name == 'sale.quotation.line'">
                        <b class="mr5">$</b><span t-esc="ol.test_fee"/>
                    </t>
                </div>
                <div class="col-xs-2 col-md-1 text-left">
                    <t t-if="ol._name == 'sale.quotation.line'">
                        <b class="mr5">$</b><span t-esc="order.shipping_fee"/>
                    </t>
                </div>
                <div class="hidden-sm hidden-xs col-xs-1 col-md-1 text-left">
                    <t t-if="ol._name == 'sale.quotation.line'">
                        <span t-esc="ol.delivery_hour"/>
                    </t>
                </div>
                <div class="hidden-sm hidden-xs col-xs-1 col-md-1 text-right" style="padding-right:0;">
                    <t t-if="ol._name == 'sale.quotation.line'">
                        <b class="mr5">$</b><span t-esc="ol.drill_fee"/>
                    </t>
                </div>
                <!--<div class="col-xs-2 text-right">-->
                    <!--<t t-if="ol._name == 'sale.quotation.line'">-->
                        <!--<span t-esc="ol.product_uom_qty"/>-->
                    <!--</t>-->
                    <!--<t t-if="ol._name == 'account.invoice.line'">-->
                        <!--<span t-esc="ol.quantity"/>-->
                    <!--</t>-->
                <!--</div>-->
                <div class="col-md-2 col-xs-4 text-right">
                    <span t-field="ol.subtotal" t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/>
                </div>
            </div>
        </t>
    </template>

    <!--钢网-->
    <template id="sale_stencil_line">
        <div class="row" id="pcb_sale_quotation_line">
            <div class="col-xs-5 col-md-2">
                <strong>Product Name</strong>
            </div>
            <div class="hidden-sm hidden-xs col-md-1 text-left">
                <strong>Quantity</strong>
            </div>
            <div class="hidden-sm hidden-xs col-md-1 text-left">

            </div>
            <div class="hidden-sm hidden-xs col-md-1 text-left"></div>
            <div class="hidden-sm col-xs-3 col-md-1 text-left">
                <strong>Shipping</strong>
            </div>
            <div class="hidden-sm hidden-xs col-md-2 text-left"></div>
            <div class="hidden-sm hidden-xs col-md-1 text-left">
                <strong>Lead Time</strong>
            </div>
            <div class="hidden-sm hidden-xs col-md-1 text-right">

            </div>
            <div class="hidden-sm col-xs-4 col-md-2 text-right">
                <strong>Total Amount</strong>
            </div>
        </div>
        <t t-foreach="order.order_line" t-as="ol">
            <div class="row orders_vertical_align">
                <div id='product_name' class="col-xs-5 col-md-2">
                    <span t-esc="order.product_id.name"/>
                </div>
                <div class="hidden-sm hidden-xs col-md-1 text-left">
                    <span t-esc="ol.product_uom_qty"/>
                </div>
                <div class="hidden-sm hidden-xs col-md-1 text-left">

                </div>
                <div class="hidden-sm hidden-xs col-md-1 text-left"></div>
                <div class="hidden-sm col-md-1 col-xs-3 text-left">
                    <b class="mr5">$</b><span t-esc="order.shipping_fee"/>
                </div>
                <div class="hidden-sm hidden-xs col-md-2 text-left"></div>
                <div class="hidden-sm hidden-xs col-md-1 text-left">
                    <span t-esc="order.stencil_line.cpo_stencil_delivery"/>
                </div>
                <div class="hidden-sm hidden-xs col-md-1 text-right" style="padding-right:0;">
                </div>
                <div class="col-md-2 col-xs-4 text-right">
                    <span t-field="order.amount_total" t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/>
                </div>
            </div>
        </t>
    </template>

    <template id="website_sale.orders_followup_products_links" name="Orders Followup Products Links" inherit_id="website_portal_sale.orders_followup">
        <xpath expr="//div[@id='product_name']/*" position="replace">
            <!--<a t-if="ol.product_id.website_published" t-att-href="ol.product_id.website_url">-->
            <span t-if="ol.product_id.website_published">
                <!--<span t-esc="ol.name" />-->
                <strong t-if="not ol.bom_file_name" t-esc="ol.product_id.with_context(display_default_code=False).display_name" />
                <strong t-if="ol.bom_file_name" t-esc="ol.bom_file_name" />
            </span>
            <!--<t t-if="not ol.product_id.website_published">-->
                <!--<span t-esc="ol.name" />-->
                <!--<strong t-if="not ol.bom_file_name" t-esc="ol.product_id.with_context(display_default_code=False).display_name" />-->
                <!--<strong t-if="ol.bom_file_name" t-esc="ol.bom_file_name" />-->
            <!--</t>-->
        </xpath>
    </template>

    <!--waiting comf-->
    <template id="waitconf" name="waitconf">
        <t t-call="website_portal.portal_layout">
            <div class="page-header">
                <span class="h3">Order under review!</span>
                <t t-call="website_portal.portal_searchbar"/>
            </div>
             <!--<p class="cpo-tips">The order is under review, You can: </p>-->
            <t t-set="additional_title">Shop - Select Payment Method</t>
            <t t-set="no_footer">1</t>

            <div id="wrap">
                <div class="container oe_website_sale">
                    <div class="row">
                        <div class="col-lg-8 col-sm-9">
                            <t t-foreach="errors" t-as="error">
                                <div class="alert alert-danger" t-if="error">
                                    <h4>
                                        <t t-esc="error[0]" />
                                    </h4>
                                    <t t-esc="error[1]" />
                                </div>
                            </t>
                        </div>
                        <div class="col-md-12 oe_cart">
                         <div class="row">
                            <div class='col-md-12 cpo_confirmed_order'>
                                <!--<t t-if="website_sale_order.website_order_line.state == 'draft'"></t>-->
                                <t t-if="website_sale_order"></t>
                                <p class="cpo_go_to_page" t-if="not website_sale_order">No order submission, You can :
                                     <a class="btn cpo_order_btn_a" href="/shop/cart"><i class="fa fa-hand-o-right cpo_hand_right"></i>My Cart</a>
                                     <a class="btn cpo_order_btn_a" href="/pcb"><i class="fa fa-hand-o-right cpo_hand_right"></i>Go to order</a>
                                 </p>
                                <p class="cpo_go_to_page" t-if="website_sale_order">
                                    The order is under review and you can go to
                                    <a class="btn cpo_order_btn_a" href="/my/orders"><i class="fa fa-hand-o-right cpo_hand_right"></i>Sales Orders</a>
                                    to view the completed order.
                                 </p>
                                <!--<table class="table table-striped table-condensed" id="cart_products" t-if="website_sale_order and website_sale_order.website_order_line">-->
                                <table class="table table-striped table-condensed" id="cart_products" t-if="website_sale_order">
                                    <thead>
                                        <tr>
                                            <th class='td-img'>Order</th>
                                            <th class='td-img'>Product</th>
                                            <!--<th>upload file</th>-->
                                            <th class='td-qty text-center'>Quantity</th>
                                            <th class='text-center td-price'>Subtotal</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-foreach="website_sale_order" t-as="order_ids_list">
                                            <t t-foreach="order_ids_list.website_order_line" t-as="line">
                                                <a t-attf-href="/my/waitconf/{{line.order_id.id}}?{{keep_query()}}">
                                                <tr>
                                                    <td t-if="line.product_id.product_tmpl_id">
                                                        <t t-if="line.state == 'sale'">
                                                            <a t-attf-href="/my/waitconf/{{line.order_id.id}}?{{keep_query()}}"><t t-esc="line.order_id.name"/></a>
                                                        </t>
                                                        <t t-else="">
                                                            <strong t-field="line.order_id.name" />
                                                        </t>
                                                    </td>
                                                    <td class='td-product_name' t-if="line.product_id.product_tmpl_id">
                                                        <div>
                                                            <!--<strong t-field="line.product_id.with_context(display_default_code=False).display_name" />-->
                                                            <strong t-if="not line.bom_file_name" t-esc="line.product_id.with_context(display_default_code=False).display_name" />
                                                            <strong t-if="line.bom_file_name" t-esc="line.bom_file_name" />
                                                        </div>
                                                        <div class="text-muted hidden-xs small">
                                                            <t t-foreach="line.name.splitlines()[1:]" t-as="name_line">
                                                                <!--<span><t t-esc="name_line"/></span><br/>-->
                                                                <strong t-if="not line.bom_file_name" t-esc="line.product_id.with_context(display_default_code=False).display_name" />
                                                                <strong t-if="line.bom_file_name" t-esc="line.bom_file_name" />
                                                            </t>
                                                        </div>
                                                    </td>
                                                    <!--<td><span t-esc="order_ids_list.website_order_line"/></td>-->
                                                    <td class='td-qty text-center'>
                                                      <div t-esc="int(line.product_uom_qty) == line.product_uom_qty and int(line.product_uom_qty) or line.product_uom_qty" />
                                                    </td>
                                                    <td class="text-center td-price">
                                                        <!--<span t-esc="'*'" style="white-space: nowrap;" />-->
                                                        <t t-if="line.state == 'sale'">
                                                            <span t-field="line.price_subtotal" style="white-space: nowrap;" t-options="{'widget': 'monetary','from_currency': line.order_id.pricelist_id.currency_id,'display_currency': website.currency_id}" />
                                                        </t>
                                                        <t t-else="">
                                                            <span>Pending review</span>
                                                        </t>
                                                    </td>
                                                </tr>
                                                </a>
                                            </t>
                                            <!-- 待确认订单上传文件 -->
                                            <!--<t t-if="order_ids_list.cpo_lock_bool">-->
                                                <!--<t t-call="website_cpo_sale.cpo_confirm_order_upload"/>-->
                                            <!--</t>-->
                                        </t>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-md-12">
                                <div class="col-lg-5 col-sm-6 col-xs-12 text-muted" id="coupon_box">
                                    <t t-if="request.env.ref('website_sale.reduction_code').active">
                                        <p>
                                          Have a promo code? Fill in this field and apply.
                                        </p>
                                        <t t-call='website_sale.coupon_form'>
                                            <t t-set='redirect'>/my/waitconf</t>
                                        </t>
                                    </t>
                                </div>
                                <!--<t t-call="website_sale.total">-->
                                    <t t-set='extra_class' t-value='"col-md-5 col-md-offset-7 col-xs-8 col-xs-offset-4"'/>
                                <!--</t>-->
                            </div>
                            <div class="clearfix" />
                            <div class="oe_structure" />
                            <div class="js_payment mb64 col-md-12 row" t-if="acquirers and website_sale_order.amount_total" id="payment_method">
                                <div class="col-lg-5 col-sm-6">
                                    <h4>Payment Method:</h4>
                                    <ul class="list-unstyled">
                                        <t t-set="payment_methods_available" t-value="False"/>
                                        <t t-set="partner_country" t-value="website_sale_order and website_sale_order.partner_invoice_id.country_id"/>
                                        <t t-foreach="acquirers or []" t-as="acquirer">
                                          <li t-if="not acquirer.country_ids or partner_country in acquirer.country_ids">
                                            <label t-if="acquirer.button">
                                                <input t-att-value="acquirer.id" type="radio" name="acquirer" t-att-checked="acquirers[0] == acquirer" />
                                                <span t-field="acquirer.image_small" t-att-title="acquirer.name" t-options='{"widget": "image", "style":"max-width: 60px; display: inline-block"}'/>
                                                <span t-field="acquirer.name" />
                                                <span t-if="acquirer.fees_active">(processing fees apply)</span>
                                            </label>
                                            <t t-set="payment_methods_available" t-value="True"/>
                                          </li>
                                        </t>
                                        <li t-if="not payment_methods_available">
                                          <div class="alert alert-warning">
                                            <span>No payment gateway is available for your country</span>
                                          </div>
                                        </li>
                                        <li t-if="any(token for token in tokens if not token.acquirer_id.country_ids or partner_country in token.acquirer_id.country_ids)">
                                            <label>
                                                <input type="radio" name="acquirer" />
                                                <span class='fa fa-2x fa-credit-card'/>
                                                Saved Cards
                                            </label>

                                            <div class="list-group">
                                                <t t-foreach='tokens' t-as='token'>
                                                    <a t-if="not token.acquirer_id.country_ids or partner_country in token.acquirer_id.country_ids" class="list-group-item btn_payment_token" t-att-data-acquirer="token.acquirer_id.id" t-att-data-token='token.id'>
                                                        <span class="js_radio fa fa-circle-o"></span>&amp;nbsp;
                                                        <t t-esc="token.name" />
                                                        <t t-if="len(set(tokens.mapped('acquirer_id')))>1">
                                                            (<t t-esc='token.acquirer_id.name'/>)
                                                        </t>
                                                        <span t-if="token.acquirer_id.fees_active">(processing fees apply)</span>
                                                    </a>
                                                </t>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-lg-5 col-lg-offset-2 col-sm-6 text-right">
                                    <t t-foreach="acquirers or []" t-as="acquirer" id="acquirers_list">
                                        <div t-att-data-id="acquirer.id" class="oe_sale_acquirer_button hidden pull-right">
                                            <div t-raw="acquirer.button" />
                                            <div class="token_hide">
                                                <div t-if="acquirer.save_token == 'ask'">
                                                    <input type="checkbox" name="odoo_save_token" id="odoo_save_token"/>
                                                    <label for="odoo_save_token">Save my payment data</label>
                                                </div>
                                                <div class="pre_msg" t-field="acquirer.pre_msg" />
                                            </div>
                                        </div>
                                    </t>
                                </div>
                            </div>
                            <!--<div class="js_payment mb64 row" t-if="not website_sale_order.amount_total" id="payment_method">-->
                                <!--<div class="col-sm-12">-->
                                    <!--<form target="_self" action="/shop/payment/validate" method="post" class="pull-right">-->
                                        <!--<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />-->
                                        <!--<a class="btn btn-primary a-submit">-->
                                            <!--<span t-if="order.amount_total &gt; 0">Pay Now <span class="fa fa-long-arrow-right"></span></span>-->
                                            <!--<span t-if="order.amount_total == 0">Confirm Order <span class="fa fa-long-arrow-right"></span></span>-->
                                        <!--</a>-->
                                    <!--</form>-->
                                <!--</div>-->
                            <!--</div>-->
                          </div>
                        </div>


                    </div>
                </div>
            </div>
        </t>
    </template>
    <!-- 等待确认：当订单有误时，可以让客户重新上传文件！ -->
    <template id="cpo_confirm_order_upload">
        <tr class="next_sib">
            <td colspan="3" class="confirm_td4">
                <table  class="table table-bordered" id="confirm_order_table">
                    <thead class="table_thead">
                        <tr class="generated_order_upload">
                        <p style="margin: 0;"></p>
                        <t t-if="order_ids_list.website_order_line == 'PCBA'">
                            <td colspan="2" class="cpo-border-right">
                                <a class="order_upload_btn" t-attf-order_id="#{order_ids_list.id}" >
                                    Add BOM file
                                    <input type="file" name="bom_file" class="order_upload_file" id="1"/>
                                </a>
                            </td>
                            <td colspan="2" class="cpo-border-left cpo-border-right">
                                <a class="order_upload_btn" t-attf-order_id="#{order_ids_list.id}">
                                    Add SMT file
                                    <input type="file" name="smt_file" class="order_upload_file" id="2"/>
                                </a>
                            </td>
                            <td colspan="2" class="cpo-border-left">
                                <a class="order_upload_btn" t-attf-order_id="#{order_ids_list.id}">
                                    Add Gerber file
                                    <input type="file" name="gerber_file" class="order_upload_file" id="3"/>
                                </a>
                            </td>
                        </t>
                        <t t-else="">
                            <td colspan="6" class="cpo-border-left">
                                <a class="order_upload_btn" t-attf-order_id="#{order_ids_list.id}">
                                    Add Gerber file
                                    <input type="file" name="gerber_file" class="order_upload_file" id="3"/>
                                </a>
                            </td>
                        </t>
                    </tr>
                    <tr>
                        <p style="margin: 0;"></p>
                        <th colspan="3">Attachment Name</th>
                        <th colspan="3">Description</th>
                    </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="order_ids_list.get_all_att_list()" t-as="row">
                            <tr>
                                <td colspan="3" class="cpo_td_sp3">
                                    <form method="POST"
                                        action="/confirm/order/delete_attach_file"
                                        enctype="multipart/form-data"
                                        class="form-inline"
                                        id="pcb_form_act">
                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                                        <input type="hidden" name="atta_id" t-att-value="row.id"/>
                                        <input type="hidden" name="return_url" value="/my/waitconf"/>
                                        <!--<button type="submit" class="btn submit pull-right cpo_delete_file" id="delete_file_atta">-->
                                        <button type="submit" class="btn submit pull-right cpo_delete_file delete_file_atta">
                                            <i class="fa fa-trash-o"></i>
                                        </button>
                                    </form>
                                    <span>
                                        <t t-esc="row.name"/>
                                    </span>
                                </td>
                                <td colspan="3">
                                    <span t-esc="row.description" t-att-data-orderid="row.res_id"/>
                                    <!--分析BOM-->
                                    <form method="POST"
                                        action="/pcba/ele/check_attach_file"
                                        enctype="multipart/form-data"
                                        class="form-inline"
                                        id="pcb_form_act">
                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                                        <input type="hidden" name="atta_id" t-att-value="row.id"/>
                                        <input type="hidden" name="return_url" value="/my/waitconf"/>
                                        <button type="submit" class="btn btn-default submit btn-primary" t-if="row.description=='BOM File'" id="check_file_atta">Check</button>
                                    </form>
                                    <!--<form method="POST"-->
                                        <!--action="/down/file"-->
                                        <!--enctype="multipart/form-data"-->
                                        <!--class="form-inline"-->
                                        <!--id="down_file_form">-->
                                        <!--<input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />-->
                                        <!--<input type="hidden" name="attachment_id" t-att-value="row.id"/>-->
                                        <!--<a class="btn btn-default cpo_down_file" title="Down File"><i class="fa fa-download"></i></a>-->
                                    <!--</form>-->
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </td>
        </tr>
    </template>

    <!--Your Sales Orders-->
    <template id="website_portal_sale.portal_my_orders" name="My Sales Orders">
      <t t-call="website_portal.portal_layout">
        <div class="page-header">
            <span class="h3">Your Sales Orders</span>
            <t t-call="website_portal.portal_searchbar"/>
        </div>
        <t t-if="not orders">
            <p>There are currently no orders for your account.</p>
        </t>
        <t t-if="orders">
            <div class="table-responsive">
            <table class="table table-hover o_my_status_table">
                <thead>
                  <tr class="active">
                    <th>
                      <span class='hidden-xs'>Sales Order #</span>
                      <span class='visible-xs'>Ref.</span>
                    </th>
                    <th>Order Date</th>
                    <th ></th>
                    <th>Total</th>
                  </tr>
                </thead>
                <t t-foreach="orders" t-as="order">
                    <tr>
                        <td>
                            <a t-attf-href="/my/home/{{order.id}}?{{keep_query()}}"><t t-esc="order.name"/></a>
                        </td>
                        <td style="text-align: center;">
                          <span t-field="order.date_order" t-options="{'widget': 'date'}"/>&amp;nbsp;
                          <span class='hidden-xs' t-field="order.date_order" t-options="{'time_only': True}"/>
                        </td>
                        <td style="text-align: center;">
                            <t t-if="order.state == 'progress'">
                                <span class="label label-info"><i class="fa fa-fw fa-clock-o"></i><span class="hidden-xs"> Invoiced</span></span>
                            </t>
                            <t t-if="order.state in ['shipping_except','invoice_except']">
                                <span class="label label-danger"><i class="fa fa-fw fa-warning"></i><span class="hidden-xs"> Problem</span></span>
                            </t>
                            <t t-if="order.state == 'done'">
                                <span class="label label-default hidden-xs"><i class="fa fa-fw fa-check"></i><span class="hidden-xs"> Done</span></span>
                            </t>
                        </td>
                        <td style="text-align: center;"><span t-field="order.amount_total" t-options='{"widget": "monetary", "display_currency": order.pricelist_id.currency_id}'/></td>
                    </tr>
                </t>
            </table></div>
            <div t-if="pager" class="o_portal_pager text-center">
              <t t-call="website.pager"/>
            </div>
        </t>
      </t>
    </template>


</odoo>
